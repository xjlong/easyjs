Easy.define("Easy.UI","Easy.data");Easy.UI={TextWidth:function(c,d,b){var a=Easy.DOM.create({tag:"div",cls:"e-text-width",html:c},d||Easy.getBody());b&&Easy.DOM.addClass(a,b);var e=a.offsetWidth;Easy.removeNode(a);return e},TextHeight:function(c,d,b){var a=Easy.DOM.create({tag:"div",cls:"e-text-height",html:c},d||Easy.getBody());b&&Easy.DOM.addClass(a,b);var e=a.offsetHeight;Easy.removeNode(a);return e},Form:{}};Easy.UI.Manage={id:0};Easy.UI.Base=Easy.extend(function(){var a=this;if(Easy.isIE6)a.BLANK_IMAGE_URL=Easy.BLANK_IMAGE_URL="/Easy/resources/image/space.gif";if(arguments&&arguments.caller)a.initConfig=arguments.caller[0];if(!a.id)a.id="easy_cmp_"+Easy.UI.Manage.id;(function(){a.itemsCmp=a.rows=[];a.events={};a.wrap=null;(a.initComponent||Easy.emptyFn).call(a);(a.initItem||Easy.emptyFn).call(a);(a.initEvent||Easy.emptyFn).call(a);a.listeners&&Easy.each(a.listeners,function(c,b){a.on(b,c,a)});a.style&&Easy.DOM.setStyle(a.wrap,a.style);a.bodyStyle&&a.body&&Easy.DOM.setStyle(a.body,a.bodyStyle);a.disabled&&a.setDisabled(true);a.hidden&&Easy.DOM.hide(a.wrap);Easy.UI.Manage[a.id]=a;Easy.UI.Manage.id+=1}).call(a,arguments)},{isValid:true,closeAction:"close",clsPrefix:"e-",defaultValue:Easy.isOpera||Easy.isIE6?"&#160;":"&#8203;",BLANK_IMAGE_URL:Easy.BLANK_IMAGE_URL,create:Easy.delegate(Easy.DOM.create,Easy.DOM),events:{},itemsCmp:[],isEasyCmp:true,close:function(){var a=this;a.setValue&&a.setValue(a.value);a.fireEvent("close",a);a.destroy()},destroy:function(){var a=this;Easy.removeNode(a.wrap);a.isRender=false;Easy.each(a.itemsCmp,function(a){a&&a.isEasyCmp&&a.destroy.call(a)});a.fireEvent("destroy",a)},find:function(b,c){var a=this;return Easy.Array.map(a.itemsCmp,function(a){return a&&a[b]==c?a:null})},hide:function(){var a=this;Easy.DOM.hide(a.wrap);a.setValue&&a.setValue(a.value);a.fireEvent("hide",a)},show:function(){var a=this;Easy.DOM.show(a.wrap);a.fireEvent("show",a)},toggleClass:function(a){Easy.DOM.toggleClass(this,a)},addClass:function(b,a){Easy.DOM.addClass(b,a)},removeClass:function(b,a){Easy.DOM.removeClass(b,a)},fireEvent:function(d,a){var e=this,c=e.events[d],b=Easy.slice(arguments,2);(a["on"+Easy.String.toPascal(d)]||Easy.emptyFn).apply(a,b);c&&Easy.each(c,function(c){Easy.isFunction(c)&&c.apply(a,b)})},on:function(b,d,c){var a=this;(a.events[b]=a.events[b]||[]).push(Easy.delegate(d,c||a,Easy.slice(arguments,3)))},un:function(a,b){var c=this;Easy.Array.remove(c.events[a]||[],b)},render:function(a){Easy.DOM.render(this.wrap,a);this.fireEvent("render",this,a)},setDisabled:function(b){var a=this;if(b){a.wrap.disabled=true;a.disabled=true;Easy.DOM.setAttribute(a.wrap,"disabled",true);Easy.DOM.addClass(a.wrap,a.baseCls+"-disabled");a.fireEvent("disable",a)}else{a.wrap.disabled=false;a.disabled=false;Easy.DOM.removeAttribute(a.wrap,"disabled",false);Easy.DOM.removeClass(a.wrap,a.baseCls+"-disabled");a.fireEvent("enable",a)}}});Easy.UI.BoxContainer=Easy.extend(Easy.UI.Base,{width:"auto",height:"auto",offset:16,hasDiv:false,defaults:{},baseCls:"e-box",overCls:"e-box-over",pressClass:"e-box-pressed",boxCls:["e-box-tl","e-box-tc","e-box-tr","e-box-cl","e-box-cc","e-box-cr","e-box-bl","e-box-bc","e-box-br"],bodyVAlign:"middle",wrap:null,body:null,cls:null,renderTo:null,isRendered:false,disabled:false,pressed:false,mouseEvent:false,itemWrap:null,itemsCmp:[],constructor:function(a){Easy.apply(this,a);this.itemsCmp=[];Easy.UI.BoxContainer.superclass.constructor.call(this)},initComponent:function(){var a=this;a.body=a.create({tag:"td",cls:a.boxCls[4],valign:a.bodyVAlign,style:{width:Easy.isNumber(a.width)?a.width-a.offset:"auto",height:Easy.isNumber(a.height)?a.height-a.offset:"auto"}});var b=a.create({tag:"table",style:{width:a.width||"auto",height:a.height||"auto"},cellpadding:0,cellspacing:0,children:{tag:"tbody",children:[{tag:"tr",children:[{tag:"td",cls:a.boxCls[0]},{tag:"td",cls:a.boxCls[1]},{tag:"td",cls:a.boxCls[2]}]},{tag:"tr",children:[{tag:"td",cls:a.boxCls[3]},a.body,{tag:"td",cls:a.boxCls[5]}]},{tag:"tr",children:[{tag:"td",cls:a.boxCls[6]},{tag:"td",cls:a.boxCls[7]},{tag:"td",cls:a.boxCls[8]}]}]}});if(a.hasDiv){a.wrap=a.create({tag:"div",children:b,id:a.id,cls:a.baseCls},a.renderTo?Easy.DOM.get(a.renderTo):null);a.table=b;a.fireEvent("render",a)}else{a.wrap=b;Easy.DOM.setAttributes(a.wrap,{id:a.id,cls:a.baseCls});a.render(a.renderTo?Easy.DOM.get(a.renderTo):null);a.fireEvent("render",a)}a.pressed&&Easy.DOM.addClass(a.wrap,a.pressClass);a.cls&&Easy.DOM.addClass(a.wrap,a.cls);a.isRendered=!!a.renderTo},initEvent:function(){var a=this,b=Easy.DOM;if(a.mouseEvent&&!a.disabled&&!a.pressed){Easy.DOM.on(a.body,"mouseover",b.addClass,b,[a.wrap,a.overCls],false);Easy.DOM.on(a.body,"mouseout",b.removeClass,b,[a.wrap,a.overCls],false);Easy.DOM.on(a.body,"mousedown",b.addClass,b,[a.wrap,a.pressClass],false);Easy.DOM.on(a.body,"mouseup",b.removeClass,b,[a.wrap,a.pressClass],false)}},initItem:function(){var a=this;a.itemWrap=a.itemWrap||a.body;if(Easy.isArray(a.items))Easy.each(a.items,function(b){var c={};Easy.applyIf(b,a.defaults);if(b.isEasyCmp){c=b;b.render(a.itemWrap)}else if(b.xtype)c=new Easy.xtype[b.xtype](Easy.applyIf(b,{renderTo:a.itemWrap}));else c.wrap=a.create(b,a.itemWrap);c.ownerCt=a;a.itemsCmp.push(c)});else if(Easy.isObject(a.items)||Easy.isElement(a.items)){var b={};Easy.applyIf(a.items,a.defaults);if(a.items.isEasyCmp){b=a.items;b.render(a.itemWrap)}else if(a.items.xtype||Easy.isDefined(a.defaults.xtype))b=new Easy.xtype[a.items.xtype](Easy.applyIf(a.items,{renderTo:a.itemWrap}));else b.wrap=a.create(a.items,a.itemWrap);b.ownerCt=a;a.itemsCmp.push(b)}a.fireEvent("renderitem",a)},render:function(b){var a=this;a.isRendered=true;Easy.DOM.render(a.wrap,Easy.DOM.get(b));a.fireEvent("render",a)},doAutoSize:function(){var a=this;Easy.DOM.setStyle(a.body,{width:Easy.isNumber(a.width)?a.width-a.offset:"auto"});Easy.DOM.setStyle(a.table,{width:a.width||"auto",height:a.height||"auto"})}});Easy.xtype={boxcontainer:Easy.UI.BoxContainer,regist:function(b,a){this[b]=a;a.xtype=b},unregist:function(a){Easy.Object.remove(this,a)}};Easy.Button=Easy.extend(Easy.UI.BoxContainer,{height:25,offsetWidth:10,width:"auto",mouseEvent:true,baseCls:"e-button",overCls:"e-button-over",pressClass:"e-button-pressed",doingText:"\u63d0\u4ea4\u4e2d...",doing:false,boxCls:["e-button-tl","e-button-tc","e-button-tr","e-button-cl","e-button-cc","e-button-cr","e-button-bl","e-button-bc","e-button-br"],constructor:function(a){Easy.apply(this,a);if(a.hasGroup)this.mouseEvent=false;Easy.Button.superclass.constructor.call(this)},initComponent:function(){var a=this,c=a.height-2,d=a.create({tag:"s",html:a.text}),b=a.create({tag:"img",src:Easy.BLANK_IMAGE_URL,cls:"e-icon "+a.iconCls,style:"height:"+c});cn=[b,d];!a.iconCls&&cn.shift();a.setIconCls=function(c){if(c==a.iconCls)a.removeClass(b,a.disabledIconCls);else a.removeClass(b,a.iconCls);Easy.DOM.addClass(b,c)};a.setText=function(a){d.innerHTML=a};a.btn=a.create({tag:"div",cls:"e-button-text",children:{tag:"b",children:cn}});var e=ww=Easy.UI.TextWidth("<b><s>"+a.text+"</s></b>",null,"e-button-text")-10;if(!a.width||a.width=="auto"){a.width=0;if(a.iconCls)ww+=22;a.width=ww+a.offsetWidth+Easy.Button.superclass.offset}Easy.DOM.setStyle(d,{width:e});Easy.DOM.setStyle(a.btn,{width:ww,height:c,lineHeight:c+"px"});Easy.DOM.unUserSelect(a.btn);a.pressed&&a.fireEvent("press",a);Easy.Button.superclass.initComponent.call(a);a.body.appendChild(a.btn)},initEvent:function(){var a=this;Easy.Button.superclass.initEvent.call(a);Easy.DOM.on(a.btn,"click",function(c,b){if(a.handler&&a.doing==false&&!a.disabled)try{a.setText(a.doingText);a.setDisabled(true);a.doing=true;a.handler.apply(a,arguments)}finally{a.setText(a.text);a.doing=false;a.setDisabled(false)}a.fireEvent("click",a,c,b)},a)},render:function(b){var a=this;Easy.DOM.render(a.wrap,Easy.DOM.get(b));Easy.DOM.setStyle(a.wrap,{width:a.width!="auto"?a.width:a.wrap.offsetWidth||"auto"});a.fireEvent("render",a)},onRender:function(){return true},onPress:function(){var a=this;!Easy.DOM.hasClass(a.wrap,"e-button-pressed")&&Easy.DOM.addClass(a.wrap,"e-button-pressed");return true},onDisable:function(){var a=this;a.disabledIconCls&&a.setIconCls(a.disabledIconCls)},onEnable:function(){var a=this;a.disabledIconCls&&a.setIconCls(a.iconCls)}});Easy.UI.Button=Easy.Button;Easy.xtype.regist("button",Easy.Button);Easy.GroupButton=Easy.extend(Easy.UI.Base,{baseCls:"e-group-button",childButton:[],firstBoxCls:["e-button-tl","e-button-tc","e-button-tc","e-button-cl","e-button-cc","e-button-cc","e-button-bl","e-button-bc","e-button-bc"],midBoxCls:["e-button-tc","e-button-tc","e-button-tc","e-button-cc","e-button-cc","e-button-cc","e-button-bc","e-button-bc","e-button-bc"],lastBoxCls:["e-button-tc","e-button-tc","e-button-tr","e-button-cc","e-button-cc","e-button-cr","e-button-bc","e-button-bc","e-button-br"],boxCls:["e-button-tl","e-button-tc","e-button-tr","e-button-cl","e-button-cc","e-button-cr","e-button-bl","e-button-bc","e-button-br"],mouseEvent:true,activeItem:-1,constructor:function(b){var a=this;a.childButton.length=0;Easy.apply(a,b);Easy.GroupButton.superclass.constructor.call(a)},initComponent:function(){var a=this,e,f,c=[],d=0,b;a.items&&Easy.each(a.items,function(g,f){var e;if(a.items.length==1)e=a.boxCls;else if(f==0)e=a.firstBoxCls;else if(f==a.items.length-1)e=a.lastBoxCls;else e=a.midBoxCls;b=new Easy.Button(Easy.apply(g,{boxCls:e,hasGroup:true}));Easy.DOM.setStyle(b.wrap,{"float":"left"});a.childButton[d]=b;c[d++]=b.wrap});c.push(a.create({tag:"div",cls:"e-clear"}));a.wrap=a.create({tag:"div",style:a.style,children:c},a.renderTo?Easy.DOM.get(a.renderTo):null);a.activeItem!=-1&&a.changStatus(a.childButton[Math.min(a.activeItem,a.childButton.length-1)])},initEvent:function(){var a=this;Easy.each(a.childButton,function(b){b.on("click",a.changStatus,a,b)})},changStatus:function(b){var a=this;Easy.each(a.childButton,function(a){b!==a&&Easy.DOM.removeClass(a.wrap,"e-button-pressed")});a.activeItem=Easy.Array.indexOf(a.childButton,b,function(a,b){return a.id==b.id});Easy.DOM.addClass(b.wrap,"e-button-pressed");a.fireEvent("change",a,b,a.activeItem)},onResize:function(){var a=this}});Easy.UI.GroupButton=Easy.GroupButton;Easy.xtype.regist("gbutton",Easy.GroupButton);Easy.SimpleButton=Easy.extend(Easy.UI.Base,{height:24,width:"auto",baseCls:"e-btn",pressClass:"e-btn-over",iconCls:null,doingText:"\u63d0\u4ea4\u4e2d...",doing:false,constructor:function(a){Easy.apply(this,a);Easy.SimpleButton.superclass.constructor.call(this)},initComponent:function(){var a=this,b=a.create({tag:"s",html:a.text});cn=[{tag:"img",src:Easy.BLANK_IMAGE_URL,cls:"e-icon "+a.iconCls},b];!a.iconCls&&cn.shift();a.setIconCls=function(a){Easy.DOM.addClass(cn,a)};a.setText=function(a){b.innerHTML=a};a.wrap=a.create({tag:"div",id:a.id,cls:a.baseCls,children:{tag:"b",children:cn}},this.renderTo?Easy.DOM.get(this.renderTo):null);if((!a.width||a.width=="auto")&&Easy.isIE){var c=a.textWidth||Easy.UI.TextWidth("<b style='float:left;display:block;'><s  style='float:left;display:block;'>"+a.text+"</s></b>",null,a.baseCls)-17;a.width=c+17;if(a.iconCls)a.width=a.width+20;Easy.DOM.setStyle(b,{width:c})}Easy.DOM.unUserSelect(b);Easy.DOM.setStyle(a.wrap,{width:a.width});a.pressed&&Easy.DOM.addClass(a.wrap,a.pressClass)},initEvent:function(){var a=this;if(!a.pressed){Easy.DOM.on(a.wrap,"mouseover",a.toggleClass,a);Easy.DOM.on(a.wrap,"mouseout",a.toggleClass,a)}Easy.DOM.on(a.wrap,"click",function(c,b){if(a.handler&&a.doing==false&&!a.disabled)try{a.setText(a.doingText);a.doing=true;a.handler.apply(a,arguments)}finally{a.setText(a.text);a.doing=false}a.fireEvent("click",a,c,b)},a)},toggleClass:function(){Easy.DOM.toggleClass(this.wrap,this.baseCls+"-over")},render:function(b){var a=this;Easy.DOM.render(a.wrap,Easy.DOM.get(b));a.fireEvent("render",a)},onRender:function(){return false}});Easy.UI.SimpleButton=Easy.SimpleButton;Easy.xtype.regist("sbutton",Easy.SimpleButton);Easy.UI.DatePicker=Easy.extend(Easy.UI.BoxContainer,{height:"auto",width:"auto",baseCls:"e-datepicker",days:[],format:Easy.Date.defaultDateFormater,closeAction:"hide",offsetWidth:-8,offsetHeight:-12,currentYear:Easy.Date.now.getFullYear(),Y:2012,M:1,D:1,_month:{\u4e00\u6708:1,\u4e8c\u6708:2,\u4e09\u6708:3,\u56db\u6708:4,\u4e94\u6708:5,\u516d\u6708:6,\u4e03\u6708:7,\u516b\u6708:8,\u4e5d\u6708:9,\u5341\u6708:10,\u5341\u4e00\u6708:11,\u5341\u4e8c\u6708:12},showTime:false,dayBody:null,timeWrap:null,constructor:function(a){var b=this;Easy.apply(b,a);Easy.UI.DatePicker.superclass.constructor.call(b);if(b.showTime)b.format=a&&a.format?Easy.Date.defaultDateFormater:a.format;else b.format=a&&a.format?a.format:"yyyy-MM-dd"},initComponent:function(){var a=this,b=[];Easy.UI.DatePicker.superclass.initComponent.call(a);var c=a.value=a.value||new Date;a.Y=c.getFullYear();a.M=c.getMonth()+1;a.D=c.getDate();b=[a.create({tag:"a",href:"javascript:void(0);",cls:"year",html:"&#160;",id:"cutYear"}),a.create({tag:"a",href:"javascript:void(0);",cls:"month",html:"&#160;",id:"cutMonth"}),a.create({tag:"a",href:"javascript:void(0);",cls:"month",html:"&#160;",id:"addMonth"}),a.create({tag:"a",href:"javascript:void(0);",cls:"year",html:"&#160;",id:"addYear"})];Easy.DOM.on(b[0],"click",function(){var b=a.value;b.setFullYear(b.getFullYear()-1);a.changeDate.call(a,b)});Easy.DOM.on(b[1],"click",function(){var b=a.value;b.setMonth(b.getMonth()-1);a.changeDate.call(a,b)});Easy.DOM.on(b[2],"click",function(){var b=a.value;b.setMonth(b.getMonth()+1);a.changeDate.call(a,b)});Easy.DOM.on(b[3],"click",function(){var b=a.value;b.setFullYear(b.getFullYear()+1);a.changeDate.call(a,b)});var g=a.yearCtl=a.create({tag:"input",cls:"year",value:a.getYear.call(a,c)}),f=a.monthCtl=a.create({tag:"input",cls:"month",value:a.getMonth.call(a,c)});a.dateWrap=a.create({tag:"div",cls:a.baseCls,children:[{tag:"div",cls:"e-datepicker-yearbar",children:[{tag:"div",cls:"e-datepicker-left-button",children:[b[0],b[1]]},{tag:"div",cls:"e-datepicker-middle-button",children:[f,g]},{tag:"div",cls:"e-datepicker-right-button",children:[b[2],b[3]]}]},{tag:"div",cls:"e-datepicker-body",children:[{tag:"div",cls:"e-datepicker-week",children:[{tag:"b",html:"\u65e5"},{tag:"b",html:"\u4e00"},{tag:"b",html:"\u4e8c"},{tag:"b",html:"\u4e09"},{tag:"b",html:"\u56db"},{tag:"b",html:"\u4e94"},{tag:"b",html:"\u516d"}]},a.dayBody=a.create({tag:"div",cls:"e-datepicker-day"}),a.timeWrap=a.create({tag:"div"}),{tag:"div",cls:"e-clear"}]}]},a.body);if(a.showTime){var e,d=a.timeCtls=[a.create({tag:"input",type:"text",name:"hour",value:c.getHours()}),a.create({tag:"span",html:":"}),a.create({tag:"input",type:"text",name:"minute",value:c.getMinutes()}),a.create({tag:"span",html:":"}),a.create({tag:"input",type:"text",name:"second",value:c.getSeconds()})];a.create({tag:"div",cls:"e-datepicker-time-wrap",children:[{tag:"label",html:"\u65f6\u95f4\uff1a"},{tag:"div",cls:"e-datepicker-time",children:d},e=a.create({tag:"input",type:"button",value:"\u786e\u5b9a"})]},a.timeWrap);Easy.DOM.on(e,"click",function(){var b=d[0].value,c=d[2].value,e=d[4].value,f=a.value;a.value=new Date(Date.parse(Easy.Date.format(f,"yyyy/MM/dd ")+b+":"+c+":"+e));a.setValue.call(a);a[a.closeAction].call(a)})}a.renderDay.call(a,c);a.initMonthMenu();a.initYearMenu();if(a.renderTo)a.isRender=true},initEvent:function(){var a=this;Easy.DOM.on(a.dateWrap,"keyup",function(c,b){b.keyCode===27&&a[a.closeAction].call(a)});Easy.DOM.on(a.monthCtl,"focus",a.showMonth,a);Easy.DOM.on(a.yearCtl,"focus",a.showYear,a);Easy.UI.DatePicker.superclass.initEvent.call(a)},initMonthMenu:function(){var a=this,b=a.monthWrap=new Easy.UI.Panel({renderTo:a.body,style:{position:"absolute",top:25,left:40},items:[{tag:"div",cls:"e-datepicker-month-wrap",style:{paddingRight:10},children:[{tag:"a",html:"\u4e00\u6708"},{tag:"a",html:"\u4e09\u6708"},{tag:"a",html:"\u4e94\u6708"},{tag:"a",html:"\u4e03\u6708"},{tag:"a",html:"\u4e5d\u6708"},{tag:"a",html:"\u5341\u4e00\u6708"}]},{tag:"div",cls:"e-datepicker-month-wrap",children:[{tag:"a",html:"\u4e8c\u6708"},{tag:"a",html:"\u56db\u6708"},{tag:"a",html:"\u516d\u6708"},{tag:"a",html:"\u516b\u6708"},{tag:"a",html:"\u5341\u6708"},{tag:"a",html:"\u5341\u4e8c\u6708"}]},{tag:"div",cls:"e-clear"}]});a.monthWrap.hide();Easy.DOM.on(b.body,"click",a.changeMonth,a,b)},initYearMenu:function(){var a=this,b=a.buildYear(),c=a.yearWrap=new Easy.UI.Panel({renderTo:a.body,style:{position:"absolute",top:25,left:40},items:[{tag:"div",cls:"e-datepicker-month-wrap",style:{paddingRight:10},html:b[0]},{tag:"div",cls:"e-datepicker-month-wrap",html:b[1]},{tag:"div",cls:"e-clear"},{tag:"div",cls:"e-datepicker-paging",children:[{tag:"a",title:"\u4e0a\u4e00\u8f6e",cmd:-12,href:"javascript:void(0)",cls:"pre"},{tag:"a",title:"\u4e0b\u4e00\u8f6e",cmd:12,href:"javascript:void(0)",cls:"next"}]}]});a.yearWrap.hide();Easy.DOM.on(c.body,"click",a.changeYear,a,c)},buildYear:function(d){var c=this,a=c.currentYear+=d||0,b=["",""];b[0]=function(){for(var c=[],b=a-6;b<a;b++)c.push("<a href='javascript:void(0)'>"+b+"</a>");return c.join("")}();b[1]=function(){for(var c=[],b=a;b<a+6;b++)c.push("<a href='javascript:void(0)'>"+b+"</a>");return c.join("")}();return b},renderDay:function(b){var a=this,c=a.days=[],g=b.getDate();a.dayBody.innerHTML="";a.monthCtl.value=a.getMonth(b);a.yearCtl.value=a.getYear(b);if(a.showTime){a.timeCtls[0].value=b.getHours();a.timeCtls[2].value=b.getMinutes();a.timeCtls[4].value=b.getSeconds()}for(var h=function(h,d,m,p){var j=h,f=a.create({tag:"div",cls:"e-datepicker-date-wrap"}),q,l=7;if(h==1){for(var o=(new Date(Date.parse(m+"/"+d+"/1"))).getDay(),n=Easy.Date.getMaxDay(m,d-1),b=n-o+1;b<=n;b++){var e=a.create({tag:"a",href:"javascript:void(0);",month:d-1,cls:"e-datepicker-date-gray",html:b},f);c.push(e);l--;Easy.DOM.on(e,"click",function(b,c){if(a.fireEvent("select",a,b)){Easy.each(a.days,function(a){if(a==b)Easy.DOM.addClass(b,"e-datepicker-selected");else Easy.DOM.removeClass(a,"e-datepicker-selected")});a.selectChange.call(a,b,d-1)}c.stop();return false})}for(var b=1;b<=l;b++){var e=a.create({tag:"a",href:"javascript:void(0);",month:d,html:b},f);c.push(e);g==b&&Easy.DOM.addClass(e,"e-datepicker-selected");j=b;Easy.DOM.on(e,"click",function(b,c){a.fireEvent("select",a,b);Easy.each(a.days,function(a){if(a==b)Easy.DOM.addClass(b,"e-datepicker-selected");else Easy.DOM.removeClass(a,"e-datepicker-selected")});a.selectChange.call(a,b,d);c.stop();return false})}}else{for(var i=0,b=h;b<h+7;b++)if(b<=p){var e=a.create({tag:"a",href:"javascript:void(0);",month:d,html:b},f);c.push(e);g==b&&Easy.DOM.addClass(e,"e-datepicker-selected");j=b;i++;Easy.DOM.on(e,"click",function(b,c){a.fireEvent("select",a,b);Easy.each(a.days,function(a){if(a==b)Easy.DOM.addClass(b,"e-datepicker-selected");else Easy.DOM.removeClass(a,"e-datepicker-selected")});a.selectChange.call(a,b,d);c.stop();return false})}else break;if(i<7)for(var k=1;k<=7-i;k++){var e=a.create({tag:"a",href:"javascript:void(0);",month:d+1,cls:"e-datepicker-date-gray",html:k},f);c.push(e);Easy.DOM.on(e,"click",function(b,c){a.fireEvent("select",a,b);Easy.each(a.days,function(a){if(a==b)Easy.DOM.addClass(b,"e-datepicker-selected");else Easy.DOM.removeClass(a,"e-datepicker-selected")});a.selectChange.call(a,b,d+1);c.stop();return false})}}Easy.DOM.render(f,a.dayBody);return j},e=Easy.Date.getMaxDay(b),i=b.getMonth()+1,j=b.getFullYear(),d=0,f=1;f<=Math.ceil(e/7)+1;f++){if(f==1)d=h(1,i,j,e);else d=h(d+1,i,j,e);if(d>=e)break}a.days=c},showMonth:function(c,b){var a=this;a.monthWrap.show();b.stop()},showYear:function(c,b){var a=this;a.yearWrap.show();b.stop()},changeMonth:function(d,b,c){var a=this;a.M=a._month[b.target.innerHTML||dom.textContent];a.value=new Date(Date.parse(a.Y+"/"+a.M+"/"+a.D));a.renderDay.call(a,new Date(Date.parse(a.Y+"/"+a.M+"/"+a.D)));c.hide()},changeYear:function(g,d,e){var a=this,c=d.target,f=Easy.DOM.getAttribute(c,"cmd");if(c.tagName.toLowerCase()=="a"&&f){var b=a.buildYear(Easy.Number.parse(f));e.itemsCmp[0].wrap.innerHTML=b[0];e.itemsCmp[1].wrap.innerHTML=b[1];d.stop();d.preventDefault()}else{var b=Easy.DOM.getText(c);if(b){a.Y=b;a.value=new Date(Date.parse(a.Y+"/"+a.M+"/"+a.D));a.renderDay.call(a,new Date(Date.parse(a.Y+"/"+a.M+"/"+a.D)));e.hide()}}},selectChange:function(c,d){var a=this,e=a.value,b=new Date(Date.parse(a.Y+"/"+d+"/"+c.innerHTML||c.textContent||1));a.value=b;if(e.getMonth()+1!=d){var b=new Date(Date.parse(a.Y+"/"+d+"/"+c.innerHTML||c.textContent||1));a.monthCtl.value=a.getMonth.call(a,b);a.yearCtl.value=a.getYear.call(a,b);a.renderDay(b)}a.target&&!a.showTime&&a[a.closeAction].call(a)},getMonth:function(e,b){var a=e.getMonth(),d=["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],c=["Jan","Feb","Mar","Apr","May","June","June","July","Aug","Sept","Oct","Nov","Dec"];return!b||b=="zh-cn"?d[a]:b=="en"?c[a]:a+1},getYear:function(a){return a.getFullYear()},onSelect:function(){return true},changeDate:function(b){var a=this;a.value=b;a.Y=b.getFullYear();a.M=b.getMonth()+1;a.D=b.getDate();a.renderDay.call(a,b)},reset:function(){var a=this;a.value=null;if(a.target){a.target.value="";a.target.focus();Easy.DOM.removeAttribute(a.target,"showed")}var b=new Date;a.Y=b.getFullYear();a.M=b.getMonth()+1;a.D=b.getDate();a.fireEvent("reset",a,a.value);return true},setValue:function(){var a=this;if(a.target){a.target.value=Easy.Date.format(a.value,a.format);a.target.focus();Easy.DOM.removeAttribute(a.target,"showed")}a.fireEvent("setValue",a,a.value);return true},getValue:function(){var a=this;return Easy.Date.format(a.value,a.format)},getDate:function(){return this.value},show:function(b){var a=this;a.target=b;if(a.target&&Easy.DOM.getAttribute(a.target,"showed"))return;var d=Date.parse((b.value||"").replace(/-/g,"/"));if(b.value&&!isNaN(d)){var c=new Date(d);a.Y=c.getFullYear();a.M=c.getMonth()+1;a.D=c.getDate();a.renderDay.call(a,c)}Easy.DOM.show(a.wrap);var e=Easy.DOM.getPosition(b),f=Easy.getScroll();if(!a.isRender){Easy.DOM.render(a.wrap,Easy.getBody());a.isRender=true}if(a.target){Easy.DOM.setAttribute(a.target,"showed",true);Easy.DOM.on(document,"click",a.onDocClick,a)}Easy.DOM.setStyle(a.wrap,{position:"absolute","z-index":999999999});Easy.DOM.setXY(a.wrap,{x:e.x+a.offsetWidth,y:e.y+b.offsetHeight+a.offsetHeight});a.fireEvent("show",a)},onClose:function(){Easy.DOM.un(document,"click",this.onDocClick)},onHide:function(){Easy.DOM.un(document,"click",this.onDocClick)},onDocClick:function(e,d){var a=this,b=d.target,c=0;while(b&&b!=a.target&&b!=a.wrap&&(a.monthWrap&&b!=a.monthWrap.wrap)&&(a.yearWrap&&b!=a.yearWrap.wrap)&&c++<15)b=b.parentNode;!(b==a.target||b==a.wrap||a.monthWrap&&b==a.monthWrap.wrap||a.yearWrap&&b==a.yearWrap.wrap)&&a[a.closeAction].call(a)}});Easy.xtype.regist("datepicker",Easy.UI.DatePicker);Easy.UI.Form.Field=Easy.extend(Easy.UI.Base,{isFormField:true,offsetWidth:12,offsetHeight:12,tipOffset:null,value:"",splitor:":",originalValue:Easy.EMPTY,label:"",isValid:true,dom:null,inputWrap:null,lblWrap:null,body:null,wrap:null,disabled:false,labelHide:false,nullable:true,maxLength:false,minLength:false,regex:null,vtype:null,verifyText:null,labelWidth:70,labelAlign:"right",disabledClass:"e-field-disabled",errorTip:null,boxCls:["e-field-tl","e-field-tc","e-field-tr","e-field-cl","e-field-cc","e-field-cr","e-field-bl","e-field-bc","e-field-br"],constructor:function(a){Easy.apply(this,a);Easy.UI.Form.Field.superclass.constructor.call(this)},initComponent:function(){var a=this;a.body=a.create({tag:"td",cls:a.boxCls[4],valign:a.bodyVAlign||"middle"});a.inputWrap=a.create({tag:"table",cls:"e-box",style:{width:a.width||"auto",height:a.height||"auto"},cellpadding:0,cellspacing:0,children:{tag:"tbody",children:[{tag:"tr",children:[{tag:"td",cls:a.boxCls[0]},{tag:"td",cls:a.boxCls[1]},{tag:"td",cls:a.boxCls[2]}]},{tag:"tr",children:[{tag:"td",cls:a.boxCls[3]},a.body,{tag:"td",cls:a.boxCls[5]}]},{tag:"tr",children:[{tag:"td",cls:a.boxCls[6]},{tag:"td",cls:a.boxCls[7]},{tag:"td",cls:a.boxCls[8]}]}]}});a.lblWrap=a.create({tag:"label",cls:"e-field-label","for":a.id,html:a.label+(a.label?a.splitor:a.labelHide?a.defaultValue:""),style:{width:a.labelWidth,"text-align":a.labelAlign}});a.wrap=a.create({tag:"div",cls:"e-field-item "+a.baseCls,children:[a.lblWrap,a.inputWrap]},a.renderTo?Easy.DOM.get(a.renderTo):null);a.labelHide&&Easy.DOM.hide(a.lblWrap,"visibility")},initEvent:function(){var a=this},doAutoSize:function(){var a=this},setLabel:function(b){var a=this;a.lblWrap.innerHTML=b},getValue:function(){var a=this;return!a.dom?undefined:(a.value=a.dom.value)},setValue:function(b){var a=this;if(a.originalValue===Easy.EMPTY)a.originalValue=a.value;a.value=b;a.dom.value=b;a.validValue(b)},reset:function(){var a=this;a.value="";a.dom.value="";a.inputWrap&&a.nullable===false&&Easy.DOM.addClass(a.inputWrap,"e-field-error");a.fireEvent("reset",a)},onReset:function(){var a=this;if(a.onChange)a.onChange("","")},validValue:function(){var a=this;if(a.disabled)return true;var b=a.getValue();if(!a.nullable)if(b==null||b==""){a.verifyText=a.nullText||a.label.replace(/\s/g,"")+"\u4e0d\u80fd\u4e3a\u7a7a\uff01";a.isValid=false;a.maskVerifyText();return false}if(b){if(a.maxLength&&b.length>a.maxLength){a.verifyText=a.label.replace(/\s/g,"")+"\u6700\u591a\u80fd\u8f93\u5165"+a.maxLength+"\u4e2a\u5b57\u7b26\uff01";a.isValid=false;a.maskVerifyText();return false}if(a.minLength&&b.length<a.minLength){a.verifyText=a.label.replace(/\s/g,"")+"\u7684\u957f\u5ea6\u4e0d\u80fd\u5c0f\u4e8e"+a.minLength+"\uff01";a.isValid=false;a.maskVerifyText();return false}if(a.regex&&b&&!a.regex.exec(b)){a.verifyText=a.regexText;a.isValid=false;a.maskVerifyText();return false}if(a.vtype)if(!((b==null||b=="")&&a.nullable))if(!Easy.Valid.check(a.vtype,b)){a.verifyText=a.vtypeText||(Easy.Valid[a.vtype+"Text"]||"").replace("{label}",a.label);a.isValid=false;a.maskVerifyText();return false}}a.verifyText=null;a.isValid=true;a.maskVerifyText();a.fireEvent("change",a,b,a.originalValue);return true},maskVerifyText:function(a){var b=this;a=a||b.verifyText;b.onValid.call(b,a)},clearError:function(){var a=this;if(a.inputWrap){Easy.DOM.removeClass(a.inputWrap,"e-field-error");if(a.errorTip){a.errorTip.close();a.errorTip=null}}},showError:function(b){var a=this;if(a.inputWrap){Easy.DOM.addClass(a.inputWrap,"e-field-error");if(a.errorTip)a.errorTip.setText(b||a.verifyText);else a.errorTip=new Easy.UI.Tooltip({text:b||a.verifyText,cls:"e-tip-error"});a.inputWrap.parentNode&&a.errorTip&&a.errorTip.show(a.inputWrap,a.tipOffset)}},enable:function(){var a=this;Easy.DOM.removeClass(a.inputWrap,a.disabledClass);a.dom.disabled=false;a.disabled=false;a.fireEvent("enabled",a)},disable:function(){var a=this;Easy.DOM.addClass(a.inputWrap,a.disabledClass);a.disabled=a.dom.disabled=true;a.clearError&&a.clearError();a.fireEvent("disabled",a)},setDisabled:function(a){this[a?"disable":"enable"]()},destroy:function(){var a=this;if(a.errorTip){a.errorTip.close();a.errorTip=undefined}Easy.UI.Form.Field.superclass.destroy.call(a)}});Easy.xtype.regist("field",Easy.UI.Form.Field);Easy.UI.Form.TextField=Easy.extend(Easy.UI.Form.Field,{baseCls:"e-textfield",offsetWidth:17,offsetHeight:9,height:28,width:220,emptyTextClass:"e-field-placeholder",readOnly:false,inputType:"text",emptyText:"",placeholderWrap:null,constructor:function(a){Easy.apply(this,a);Easy.UI.Form.TextField.superclass.constructor.call(this)},initComponent:function(){var a=this;Easy.UI.Form.TextField.superclass.initComponent.call(a);a.dom=a.create({tag:"input",id:a.id,name:a.name,type:a.inputType||"text",cls:a.baseCls+"-input",value:a.value},a.body);if(a.emptyText){var c=Easy.UI.TextWidth(a.emptyText,a.body,a.placeholderClass);a.placeholderWrap=a.create({tag:"label",cls:a.emptyTextClass,html:a.emptyText,"for":a.id},a.body);a.changePlaceholder()}a.nullable===false&&Easy.isEmpty(a.value)&&Easy.DOM.addClass(a.inputWrap,"e-field-error");if(a.unit){var b=a.unitWrap=document.createTextNode(a.unit);a.body.appendChild(b)}a.setUnit=function(b){if(a.unitWrap)a.unitWrap.data=b;else{var c=a.unitWrap=document.createTextNode(b);a.body.appendChild(c);Easy.DOM.setStyle(a.dom,{width:a.width-a.offsetWidth-Easy.UI.TextWidth(b)})}};a.setIconCls(a.iconCls);a.doAutoSize();a.setDisabled(a.disabled);a.setReadOnly(a.readOnly)},initEvent:function(){var a=this,b=Easy.DOM;Easy.UI.Form.TextField.superclass.initEvent.call(a);if(!a.disabled&&a.dom){Easy.DOM.on(a.dom,"focus",function(d,c){b.addClass(d,c);a.fireEvent("focus",a)},b,[a.inputWrap,"e-field-focus"],false);Easy.DOM.on(a.dom,"blur",function(d,c){b.removeClass(d,c);a.fireEvent("blur",a)},b,[a.inputWrap,"e-field-focus"],false);Easy.DOM.on(a.dom,"change",a.validValue,a);Easy.DOM.on(a.dom,"keyup",function(c,b){a.changePlaceholder(c,b);a.fireEvent("keyup",a,c,b)},a);Easy.DOM.on(a.dom,"keydown",function(c,b){a.fireEvent("keydown",a,c,b)},a);Easy.DOM.on(a.dom,"keypress",function(c,b){a.fireEvent("keypress",a,c,b)},a)}},doAutoSize:function(){var a=this,b=[a.dom];a.placeholderWrap&&b.push(a.placeholderWrap);Easy.DOM.setStyle(b,{width:a.width-a.offsetWidth-(a.unit?Easy.UI.TextWidth(a.unit):0)});Easy.DOM.setStyle(a.wrap,{width:a.width+a.labelWidth+10})},setIconCls:function(b){var a=this;if(b){a.addClass(a.dom,"e-icon-wrap "+b);Easy.DOM.setStyle(a.dom,{paddingLeft:Easy.DOM.getStyle(a.dom,"paddingLeft")+13+(Easy.isGecko?0:5)});Easy.DOM.setStyle(a.placeholderWrap,{paddingLeft:Easy.DOM.getStyle(a.placeholderWrap,"paddingLeft")+13+(Easy.isGecko?0:5)});a.offsetWidth+=20}},changePlaceholder:function(d,c,b){var a=this;if(a.placeholderWrap){if(Easy.isDefined(b)){Easy.DOM[b?"show":"hide"](a.placeholderWrap);return}if(Easy.isEmpty(a.getValue()))Easy.DOM.show(a.placeholderWrap);else Easy.DOM.hide(a.placeholderWrap)}},onChange:function(b){var a=this;b&&a.changePlaceholder(null,null,false)},onValid:function(b){var a=this;if(!a.isValid)a.showError(b);else a.clearError();a.fireEvent("valided",a,b)},setReadOnly:function(b){var a=this;b=b!==undefined?b:a.readOnly;a.dom&&Easy.isElement(a.dom)&&a[b?"addClass":"removeClass"](a.dom,"e-field-readonly");Easy.DOM.setAttribute(a.dom,"readonly",b)}});Easy.xtype.regist("textfield",Easy.UI.Form.TextField);Easy.UI.Form.Radio=Easy.extend(Easy.UI.Base,{offsetWidth:12,offsetHeight:12,height:20,isFormField:true,value:false,splitor:":",originalValue:Easy.EMPTY,label:"",boxLabel:"",dom:null,disabled:false,checked:false,labelWidth:70,labelAlign:"right",baseCls:"e-radio",disabledClass:"e-radio-disabled",inputDoms:[],itemsCmp:[],constructor:function(a){this.itemsCmp=[];Easy.apply(this,a);Easy.UI.Form.Radio.superclass.constructor.call(this)},initComponent:function(){var a=this,b=[];if(a.items)Easy.isArray(a.items)&&Easy.each(a.items,function(c){c.inputValue=c.inputValue||c.boxLable;var h=Easy.guid++,d=a.create({tag:"div",value:c.inputValue||c.value,cls:a.baseCls+"-input"}),e=a.create({tag:"div",value:c.inputValue||c.value,cls:a.baseCls+"-text",html:c.boxLabel});a.inputDoms.push(d);var f=a.create({tag:"div",value:c.inputValue||c.value,cls:a.baseCls+"-item",children:[d,e]});c.checked&&Easy.DOM.addClass(d,a.baseCls+"-checked");a.itemsCmp.push(Easy.apply(c,{wrap:f,input:d,textWrap:e,checked:c.checked||false}));b.push(f)});a.body=a.create({tag:"div",cls:a.baseCls+"-items",children:b});a.lblWrap=a.create({tag:"label",cls:"e-field-label","for":a.id,html:a.label+(a.label?a.splitor:""),style:{width:a.labelWidth,"text-align":a.labelAlign,"line-height":a.height+a.offsetHeight}});a.wrap=a.create({tag:"div",cls:"e-field-item "+a.baseCls,children:[a.lblWrap,a.body,{tag:"div",cls:"e-clear"}]},a.renderTo?Easy.DOM.get(a.renderTo):null);a.setDisabled(true);a.value&&a.setValue(a.value)},initEvent:function(){var a=this;Easy.DOM.on(a.body,"click",a.click,a)},click:function(d,c,b){var a=this;if(a.disabled&&!b)return false;Easy.each(a.itemsCmp,function(d){if(Easy.DOM.hasClass(c.target,a.disabledClass))return Easy.BREAK;if(!b)if(d.disabled==true)return Easy.CONTINUE;if(c.target==d.input||c.target==d.textWrap){Easy.DOM.addClass(d.input,a.baseCls+"-checked");a.value=d.inputValue;d.checked=true}else{Easy.DOM.removeClass(d.input,a.baseCls+"-checked");d.checked=false}});!b&&a.fireEvent("click",a)},setLabel:function(b){var a=this;a.lblWrap.innerHTML=b},getValue:function(){var a=this;return a.value},setValue:function(b){var a=this;if(a.originalValue===Easy.EMPTY)a.originalValue=a.value;Easy.each(a.itemsCmp,function(c){if(b===c.inputValue){a.click(a.body,{target:c.input},true);return false}});a.fireEvent("change",a)},reset:function(){var a=this;Easy.each(a.itemsCmp,function(b){if(b.checked){Easy.DOM.addClass(b.input,a.baseCls+"-checked");a.value=b.inputValue}else Easy.DOM.removeClass(b.input,a.baseCls+"-checked")});a.fireEvent("reset",a)},doAutoSize:function(){var a=this;Easy.UI.Form.Radio.superclass.doAutoSize.call(a);Easy.DOM.setStyle(a.wrap,{width:a.width+a.labelWidth+10});Easy.DOM.setStyle(a.body,{width:a.width-10})},enable:function(b){var a=this;Easy.each(a.itemsCmp,function(c,d){if(c.disabled!=true||d==b){c.disabled=false;Easy.DOM.removeClass(c.input,a.disabledClass);Easy.DOM.removeClass(c.textWrap,a.disabledClass);Easy.DOM.removeClass(c.input,a.disabledClass+"-checked")}});a.fireEvent("enabled",a)},disable:function(b){var a=this;Easy.each(a.itemsCmp,function(c,d){if(c.disabled==true||d==b){c.disabled=true;Easy.DOM.addClass(c.textWrap,a.disabledClass);Easy.DOM.addClass(c.input,a.disabledClass+(c.checked?"-checked":""))}});a.fireEvent("disabled",a)},setDisabled:function(a){this[a?"disable":"enable"]()}});Easy.xtype.regist("radio",Easy.UI.Form.Radio);Easy.UI.Form.Checkbox=Easy.extend(Easy.UI.Form.Radio,{baseCls:"e-checkbox",disabledClass:"e-checkbox-disabled",value:"",constructor:function(a){Easy.apply(this,a);Easy.UI.Form.Checkbox.superclass.constructor.call(this)},initComponent:function(){var a=this;Easy.UI.Form.Checkbox.superclass.initComponent.call(this)},click:function(c,b){var a=this;Easy.each(a.itemsCmp,function(c){if(c.disabled==true)return Easy.CONTINUE;if(b.target==c.input||b.target==c.textWrap){Easy.DOM[c.checked?"removeClass":"addClass"](c.input,a.baseCls+"-checked");a.value=Easy.String.toggle(a.value,c.inputValue.toString(),",");c.checked=!c.checked}});a.fireEvent("click",a)},getValue:function(){var a=this;a.value=a.value.toString().substring(a.value.toString().substring(0,1)==","?1:0);return a.value},setValue:function(b){var a=this;if(a.originalValue===Easy.EMPTY)a.originalValue=a.value;Easy.each(a.itemsCmp,function(c){if(b===c.inputValue||Easy.isArray(b)&&Easy.Array.has(b,c.inputValue)){Easy.DOM.addClass(c.input,a.baseCls+"-checked");c.checked=!c.checked}});a.value=b;a.fireEvent("change",a)}});Easy.xtype.regist("checkbox",Easy.UI.Form.Checkbox);Easy.UI.Form.ToggleField=Easy.extend(Easy.UI.Form.TextField,{readOnly:true,baseCls:"e-toggle",disabledClass:"e-toggle-disabled",boxCls:["e-toggle-tl","e-toggle-tc","e-toggle-tr","e-toggle-cl","e-toggle-cc","e-toggle-cr","e-toggle-bl","e-toggle-bc","e-toggle-br"],valueField:"value",textField:"text",itemLi:[],delayLoad:true,nocahe:false,url:"",basePrams:{},store:null,offsetWidth:37,maxListHeight:300,valueInput:null,toggle:null,constructor:function(a){Easy.apply(this,a);this.itemLi.length=0;Easy.UI.Form.ToggleField.superclass.constructor.call(this)},initComponent:function(){var a=this;a.valueInput=a.create({tag:"input",name:a.hiddenName||a.name,type:"hidden"});Easy.UI.Form.ToggleField.superclass.initComponent.call(this);var b=a.toggle=a.create({tag:"div",cls:a.baseCls+"-toggle",html:" "},a.body);Easy.DOM.render(a.valueInput,a.body);a.nullable===false&&Easy.DOM.addClass(b,"error");Easy.DOM.setStyle(a.wrap,{zIndex:99999999-Easy.guid});a.initItemWrap();a.value&&a.setValue(a.value,a.text||null)},initEvent:function(){var a=this;Easy.DOM.on(a.toggle,"click",function(){a.addFocusCls(true);a.showAndLoad(true)});if(a.readOnly)Easy.DOM.on(a.dom,"click",function(){a.addFocusCls(true);a.showAndLoad(true)});if(a.itemWrap)Easy.DOM.on(a.itemWrap.wrap,"click",function(d,c){var b=c.target;b.tagName.toLowerCase()=="a"&&a.select(b)})},initItemWrap:function(){var a=this,e=Easy.DOM.getPosition(a.inputWrap),d=a.listWrap=a.create({tag:"ul",id:a.id+"_toggel_ul",style:{width:Easy.isNumber(a.width)?a.width-12:"100%",height:25},children:[{tag:"li",cls:"e-icon-loading",html:"\u6b63\u5728\u52a0\u8f7d\u6570\u636e..."}]}),c={left:a.labelWidth+3,top:24},b=a.itemWrap=new Easy.UI.BoxContainer({style:c,cls:a.baseCls+"-item-wrap",width:a.width,renderTo:a.wrap,items:d,boxCls:["e-toggle-cl e-toggle-tl-clear","e-toggle-tc-clear"," e-toggle-cr e-toggle-tr-clear","e-toggle-cl","e-toggle-cc","e-toggle-cr","e-toggle-bl","e-toggle-bc","e-toggle-br"]});b.hide();if(a.data)a.addList(a.data);else a.store&&a.delayLoad==false&&a.load()},addList:function(b){var a=this;a.listWrap.innerHTML="";if(b.length!=0)Easy.each(b,function(b){var c=a.create({tag:"li",children:{tag:"a",href:"javascript:void(0)",html:b[a.textField],value:b[a.valueField]}},a.listWrap);a.itemLi.push(c)});else a.create({tag:"li",value:"",html:"\u6ca1\u6709\u6570\u636e"},a.listWrap);Easy.DOM.setStyle(a.listWrap,{height:Math.min((b.length||1)*25,a.maxListHeight),overflowY:"auto"})},initData:function(a){var b=this;b.data=a;b.addList(a)},clear:function(){var a=this;a.data=[];a.addList([])},load:function(b){var a=this;if(a.store)if(!a.data||a.data&&(nocahe||a.nocahe)){if(!a.store&&a.url)a.store=new Easy.data.JsonStore({url:a.url,baseParams:Easy.apply(b,a.baseParams),target:a,noMask:true,autoLoad:true});else{a.store.target=a;a.store.noMask=true}a.store.init(b)}},showAndLoad:function(){var a=this;a.delayLoad&&Easy.delay(a.load,500,a);a.showItem()},showItem:function(){var a=this;a.itemWrap.show.call(a.itemWrap);Easy.DOM.on(document,"click",function(f,d){var c=a.wrap,b=d.target,e=0;while(b!=c&&e++<8){if(b==c||b==null)break;b=b.parentNode}if(b!=c){a.hideItem();Easy.DOM.un(document,"click",arguments.callee)}})},hideItem:function(){var a=this;a.itemWrap.hide.call(a.itemWrap);a.addFocusCls(false);a.fireEvent("hideItem",a)},addFocusCls:function(b){var a=this;if(b){a.addClass(a.wrap,a.baseCls+"-focus");a.addClass(a.toggle,"focus");a.fireEvent("focus",a)}else{a.removeClass(a.wrap,a.baseCls+"-focus");a.removeClass(a.toggle,"focus");a.fireEvent("blur",a)}},setValue:function(b,c){var a=this;if(a.originalValue===Easy.EMPTY)a.originalValue=a.value;a.value=b||a.value;a.text=c||a.text;a.dom.value=a.text||"";if(a.valueInput)a.valueInput.value=a.value;!c&&a.queryText(b);a.validValue(b)},reset:function(){var a=this;a.text="";a.dom.value=a.text;if(a.valueInput)a.valueInput.value="";Easy.UI.Form.ToggleField.superclass.reset.call(a);a.clear()},queryText:function(c){var a=this,b=function(b){(b||a.data)&&Easy.each(b||a.data,function(b){if(b[a.valueField]==c&&b[a.textField]){a.dom.value=a.text=b[a.textField];return false}})};if(a.data)b();else{a.on("load",function(c){b(c);a.un("load",arguments.callee)});a.load()}},onValid:function(b){var a=this;Easy.UI.Form.ToggleField.superclass.onValid.call(this,b);if(!a.isValid)Easy.DOM.addClass(a.toggle,"error");else Easy.DOM.removeClass(a.toggle,"error")},getText:function(){return this.text},select:function(b){var a=this,d=b.innerHTML,c=Easy.DOM.getAttribute(b,"value");a.changePlaceholder.call(a,a.placeholderWrap,null,false);a.setValue(c,d);a.addSelectCls(b);a.hideItem();a.fireEvent("select",a,c,d)},addSelectCls:function(b){var a=this,c=Easy.DOM.getParent(b,"li");Easy.each(a.itemLi,function(b){Easy.DOM.removeClass(b,a.baseCls+"-selected")});Easy.DOM.addClass(c,a.baseCls+"-selected")}});Easy.xtype.regist("togglefield",Easy.UI.Form.ToggleField);Easy.UI.Form.AutoFilterField=Easy.extend(Easy.UI.Form.ToggleField,{valueField:"value",textField:"text",readOnly:false,queryName:"key",nocahe:true,constructor:function(a){Easy.apply(this,a);Easy.UI.Form.AutoFilterField.superclass.constructor.call(this)},initComponent:function(){var a=this;Easy.UI.Form.AutoFilterField.superclass.initComponent.call(this)},initEvent:function(){var a=this;Easy.UI.Form.AutoFilterField.superclass.initEvent.call(this);Easy.DOM.on(a.dom,"keyup",function(){Easy.delay(function(){var b={};b[a.queryName]=a.dom.value;a.load(b)},800)})},addList:function(b){var a=this;a.listWrap.innerHTML="";b=a.filter(b,a.dom.value);if(b.length!=0)Easy.each(b,function(b){var c=a.create({tag:"li",children:{tag:"a",href:"#",html:b[a.textField],value:b[a.valueField]}},a.listWrap);a.itemLi.push(c)});else a.create({tag:"li",value:"",html:"\u6ca1\u6709\u6570\u636e"},a.listWrap);Easy.DOM.setStyle(a.listWrap,{height:(b.length||1)*25});a.addFocusCls(true);a.showItem(true)},load:function(b){var a=this;if(a.store)if(!a.data||a.data&&a.nocahe){if(!a.store&&a.url)a.store=new Easy.data.JsonStore({url:a.url,baseParams:Easy.apply(b,a.baseParams),target:a,noMask:true,autoLoad:true});else a.store.target=a;a.store.init(b)}},filter:function(b,d){var c=this,a=[];Easy.each(b,function(b){b[c.textField]==d&&a.push(b)});return a}});Easy.xtype.regist("autofilterfield",Easy.UI.Form.AutoFilterField);Easy.UI.Form.ComposeField=Easy.extend(Easy.UI.Base,{baseCls:"e-groupfield",isValid:true,constructor:function(a){Easy.apply(this,a);Easy.UI.Form.GroupField.superclass.constructor.call(this)},initComponent:function(){var a=this;a.wrap=a.create({tag:"div",cls:a.baseCls},a.renderTo?Easy.DOM.get(a.renderTo):null)},initItem:function(){var a=this,c={};a.itemWrap=a.wrap;var b=a.inputWrap=a.create({tag:"table",cls:"e-composefield",style:{height:a.height||"auto"},cellpadding:0,cellspacing:0,children:{tag:"tbody",children:[{tag:"tr",children:function(){return Easy.Array.map(a.items,function(c,f){var d,b;b=[].concat(Easy.xtype[c.xtype].prototype.boxCls);b[3]=b[7]=b[11]="e-clear";if(f==0){b[0]="e-field-ftl";b[4]="e-field-fcl";b[8]="e-field-fbl"}else{b[0]="e-group-ft";b[4]="e-group-fc";b[8]="e-group-fb"}if(c.isEasyCmp)d=c;else if(c.xtype||Easy.isDefined(a.defaults.xtype))d=new Easy.xtype[c.xtype](Easy.applyIf(Easy.applyIf(c,{boxCls:b}),a.defaults));else d.wrap=a.create(Easy.applyIf(c,a.defaults));a.itemsCmp.push(d);var e=a.create({tag:"td",children:d.wrap});return e}).concat(a.create({tag:"td",children:[{tag:"table",cellpadding:0,cellspacing:0,children:[{tag:"tbody",children:[{tag:"tr",children:{tag:"td",cls:"e-field-tr"}},{tag:"tr",children:{tag:"td",cls:"e-field-cr",style:"height:20px"}},{tag:"tr",children:{tag:"td",cls:"e-field-br"}}]}]}]}))}()}]}});a.wrap=a.create({tag:"div",cls:"e-field-item "+a.baseCls,children:[a.inputWrap]},a.renderTo?Easy.DOM.get(a.renderTo):null);Easy.each(a.itemsCmp,function(a){a.wrap&&Easy.isNumber(a.width)&&Easy.DOM.setStyle(a.wrap,{width:Easy.DOM.getWidth(a.wrap)-5})});a.fireEvent("renderitem",a)},reset:function(){var a=this;a.itemsCmp&&Easy.each(a.itemsCmp,function(a){a.isFormField&&a.reset&&a.reset()});a.fireEvent("reset",a)},valid:function(){var b=this,a=true,c=[];b.itemsCmp&&Easy.each(b.itemsCmp,function(b){if(b.validValue){b.validValue();if(!b.isValid){a=a&&false;c.push(b.verifyText)}}});b.error=c.join("<br/>");b.isValid=a;return a},getValues:function(){var b=this,a={};if(b.itemsCmp&&b.valid()){Easy.each(b.itemsCmp,function(b){if(b.getValue)if(b.hiddenName){a[b.hiddenName]=b.getValue();if(b.getText)a[b.name]=b.getText()}else a[b.name]=b.getValue()});return a}else return false},setValues:function(a){var b=this;Easy.isObject(a)&&Easy.each(b.itemsCmp,function(b){if(b.setValue&&b.name)if(b.hiddenName)b.setValue(Easy.value(a[b.hiddenName]),Easy.value(a[b.name]));else b.setValue(Easy.value(a[b.name]))});b.fireEvent("setValues",b,a)},validValue:function(){var a=this,b=true,c=[];a.itemsCmp&&Easy.each(a.itemsCmp,function(a){if(a.validValue){a.validValue();if(!a.isValid){b=b&&false;c.push(a.verifyText)}}});a.error=c.join("<br/>");a.isValid=b;a.fireEvent("valided",a);return b}});Easy.xtype.regist("composefield",Easy.UI.Form.ComposeField);Easy.UI.Form.DateField=Easy.extend(Easy.UI.Form.TextField,{baseCls:"e-datefield",emptyTextClass:"e-field-placeholder",format:"yyyy-MM-dd",showTime:false,datePicker:null,constructor:function(a){Easy.apply(this,a);Easy.UI.Form.DateField.superclass.constructor.call(this)},initComponent:function(){var a=this;Easy.UI.Form.DateField.superclass.initComponent.call(a)},initEvent:function(){var a=this,b=Easy.DOM;Easy.UI.Form.DateField.superclass.initEvent.call(a);if(!a.disabled&&a.dom)Easy.DOM.on(a.dom,"click",function(){if(!a.datePicker)a.datePicker=new Easy.UI.DatePicker({showTime:a.showTime,offsetHeight:2,listeners:{setValue:function(b){a.setValue(b)},select:Easy.delegate(a.select,a)}});a.datePicker.show(a.dom)},a)},setValue:function(a){var b=this;a=Easy.Date.format(a,b.format);b.dom.value=a;Easy.UI.Form.DateField.superclass.setValue.call(this,a)},select:function(c,b){var a=this;a.placeholderWrap&&a.changePlaceholder(c,b,false)}});Easy.xtype.regist("datefield",Easy.UI.Form.DateField);Easy.UI.Form.FileField=Easy.extend(Easy.UI.Form.TextField,{baseCls:"e-file",emptyTextClass:"e-field-placeholder",readOnly:true,buttonText:"\u6d4f\u89c8\u00b7\u00b7\u00b7",multiText:"\u6dfb\u52a0",filter:"*",valueSplit:",",btnOffset:10,offsetWidth:11,multiFile:false,addBtn:null,boxCls:["e-field-tl","e-field-tc","e-field-tc","e-field-cl","e-field-cc","e-field-cc","e-field-bl","e-field-bc","e-field-bc"],constructor:function(b){var a=this;Easy.apply(a,b);a._width=a.width;a.width=a.width-(Easy.isNumber(a.width)?Easy.UI.TextWidth(a.buttonText)+a.btnOffset+(a.multiFile?Easy.UI.TextWidth(a.multiText)+7:0):a.width);Easy.UI.Form.FileField.superclass.constructor.call(a)},initComponent:function(){var a=this,b=a.multiFile?["e-file-tl","e-file-tc","e-file-tl","e-file-cl","e-file-cc","e-file-cl","e-file-bl","e-file-bc","e-file-bl"]:["e-file-tl","e-file-tc","e-file-tr","e-file-cl","e-file-cc","e-file-cr","e-file-bl","e-file-bc","e-file-br"];a.btn=new Easy.UI.BoxContainer({boxCls:b,items:{tag:"div",style:{height:20,lineHeight:20},html:a.buttonText},style:{"float":"left"}});if(a.multiFile)a.addBtn=new Easy.UI.BoxContainer({boxCls:["e-clear","e-file-tc","e-file-tr","e-clear","e-file-cc","e-file-cr","e-clear","e-file-bc","e-file-br"],items:{tag:"div",style:{height:20,lineHeight:20},html:a.multiText},style:{"float":"left"}});Easy.UI.Form.FileField.superclass.initComponent.call(a);a.btn.render(a.wrap);a.multiFile&&a.addBtn.render(a.wrap);a.create({tag:"div",cls:"e-clear"},a.wrap);a.resetFile()},initEvent:function(){var a=this;Easy.UI.Form.FileField.superclass.initEvent.call(a);Easy.DOM.on(a.fileInput,"change",a.selectFile,a);if(a.multiFile)Easy.DOM.on(a.addBtn.wrap,"click",a.createSelf,a,[a.value],false)},createSelf:function(d){var a=this;if(a.action=="DELETETHIS")a.destroy();else{var c={labelHide:true,multiFile:true,buttonText:a.buttonText,multiText:"\u5220\u9664",action:"DELETETHIS",name:a.name,width:a._width,height:a.height,filter:a.filter,value:d||"",nullable:a.nullable,listeners:Easy.apply({},a.listeners||{}),wrap:null,body:null,lblWrap:null,inputWrap:null,errorTip:null,dom:null,placeholderWrap:null,fileInput:null,addBtn:null,btn:null,inputWrap:null,deleteBtn:null},b=new Easy.UI.Form.FileField(c);Easy.DOM.insertAfter(b.wrap,a.wrap);b.clearError();return b}},doAutoSize:function(){var a=this;Easy.UI.Form.FileField.superclass.doAutoSize.call(a);var b=Easy.UI.TextWidth(a.buttonText)+a.btnOffset;Easy.DOM.setStyle(a.btn.wrap,{width:b});Easy.DOM.setStyle(a.wrap,{width:a.width+a.labelWidth+b+(a.multiFile?Easy.UI.TextWidth(a.multiText)+12:5)})},selectFile:function(a){var b=this;if(b.filterFile(a.value)){var c=a.value.substring(a.value.lastIndexOf("\\")+1);b.setValue(c)}},filterFile:function(b){var a=this,c=b.substring(b.lastIndexOf(".")).toLowerCase();if(a.filter=="*")return true;else if(Easy.String.has(a.filter,c))return true;alert("\u8bf7\u9009\u62e9\u540e\u7f00\u540d\u4e3a\uff1a"+a.filter+" \u7684\u6587\u4ef6\uff01");a.resetFile();return false},addDeleteBtn:function(b){var a=this;if(!a.deleteBtn){a.deleteBtn=a.create({tag:"img",src:Easy.BLANK_IMAGE_URL,cls:"e-file-delete",style:{"float":"left"}},a.body);Easy.DOM.on(a.deleteBtn,"click",a.remove,a)}Easy.DOM[b?"show":"hide"](a.deleteBtn,"visibility");Easy.DOM.setStyle(a.dom,{width:a.width-a.offsetWidth-21,"float":"left"})},clearDeleteBtn:function(){var a=this;Easy.DOM.hide(a.deleteBtn,"visibility");a.setValue("")},resetFile:function(){var a=this;Easy.removeNode(a.fileInput);a.fileInput=a.create({tag:"input",type:"file",name:a.name,cls:"e-file-file"},a.btn.body);Easy.DOM.setStyle(a.inputWrap,{"float":"left"});Easy.DOM.setOpacity(a.fileInput,0);a.setValue(a.value)},remove:function(){this.fireEvent("remove",this,this.getValue());this.clearDeleteBtn()},setValue:function(b){var a=this;if(b&&b.indexOf(a.valueSplit)>-1&&a.multiFile){var c=b.split(a.valueSplit);a.setValue(c[0]);Easy.each(c,function(b,d){if(d>0){var c=a.createSelf(b);c.fireEvent("change",c,b)}})}else{Easy.UI.Form.FileField.superclass.setValue.call(a,b);a.addDeleteBtn(!!b)}},onValid:function(){var a=this;Easy.UI.Form.FileField.superclass.onValid.call(a);var b=new Easy.Timer(function(){b.destroy();if(a.inputWrap.parentNode)a.errorTip&&!Easy.DOM.isHide(a.errorTip.wrap)&&Easy.DOM.setXY(a.errorTip.wrap,{x:Easy.DOM.getStyle(a.errorTip.wrap,"left")+Easy.UI.TextWidth(a.buttonText+(a.multiFile?a.multiText:""))+10+(a.multiFile?7:0)})},10)}});Easy.xtype.regist("filefield",Easy.UI.Form.FileField);Easy.UI.Form.GroupField=Easy.extend(Easy.UI.Base,{baseCls:"e-groupfield",itemsCmp:[],constructor:function(a){Easy.apply(this,a);this.itemsCmp.length=0;Easy.UI.Form.GroupField.superclass.constructor.call(this)},initComponent:function(){var a=this;a.wrap=a.create({tag:"div",cls:a.baseCls},a.renderTo?Easy.DOM.get(a.renderTo):null)},initItem:function(){var a=this,b={};a.itemWrap=a.wrap;if(Easy.isArray(a.items))Easy.each(a.items,function(c){if(c.isEasyCmp){b=c;c.render(a.itemWrap)}else if(c.xtype)b=new Easy.xtype[c.xtype](Easy.applyIf(Easy.applyIf(c,a.defaults),{renderTo:a.itemWrap}));else b.wrap=a.create(Easy.applyIf(c,a.defaults),a.itemWrap);Easy.DOM.setStyle(b.wrap,{"float":"left"});b.ownerCt=a;a.itemsCmp.push(b)});else if(Easy.isObject(a.items)){if(a.items.isEasyCmp){b=a.items;b.render(a.itemWrap)}else if(a.items.xtype)b=new Easy.xtype[a.items.xtype](Easy.applyIf(Easy.applyIf(a.items,a.defaults),{renderTo:a.itemWrap}));else b.wrap=a.create(Easy.applyIf(a.items,a.defaults),a.itemWrap);b.ownerCt=a;Easy.DOM.setStyle(b.wrap,{"float":"left"});a.itemsCmp.push(b)}a.create({tag:"div",cls:"e-clear"},a.wrap);a.fireEvent("renderitem",a)},reset:function(){var a=this;a.itemsCmp&&Easy.each(a.itemsCmp,function(a){a.isFormField&&a.reset&&a.reset()});a.fireEvent("reset",a)},getValues:function(){var b=this,a={};if(b.itemsCmp&&b.valid()){Easy.each(b.itemsCmp,function(b){if(b.getValue)if(b.hiddenName){a[b.hiddenName]=b.getValue();if(b.getText)a[b.name]=b.getText()}else a[b.name]=b.getValue()});return a}else return false},setValues:function(a){var b=this;Easy.isObject(a)&&Easy.each(b.itemsCmp,function(b){if(b.setValue&&b.name)if(b.hiddenName)b.setValue(Easy.value(a[b.hiddenName]),Easy.value(a[b.name]));else b.setValue(Easy.value(a[b.name]))});b.fireEvent("setValues",b,a)},validValue:function(){var a=this,c=true,b=[];a.itemsCmp&&Easy.each(a.itemsCmp,function(a){if(a.validValue){a.validValue();if(!a.isValid){c=false;b.push(a.verifyText)}}});a.error=b.join("<br/>");a.fireEvent("valided",a);return c}});Easy.xtype.regist("groupfield",Easy.UI.Form.GroupField);Easy.UI.Form.HiddenField=Easy.extend(Easy.UI.Form.TextField,{nullable:true,vtype:false,regex:false,maxLength:false,minLenght:false,baseCls:"e-textfield",inputType:"hidden",constructor:function(a){Easy.apply(this,a);Easy.UI.Form.HiddenField.superclass.constructor.call(this)},initComponent:function(){var a=this;Easy.UI.Form.HiddenField.superclass.initComponent.call(a);Easy.DOM.hide(a.wrap)}});Easy.xtype.regist("hidden",Easy.UI.Form.HiddenField);Easy.UI.Form.NumberField=Easy.extend(Easy.UI.Form.TextField,{baseCls:"e-numberfield",emptyTextClass:"e-field-placeholder",filter:new RegExp("[.0123456789-]","img"),regex:/^(-?\d+)(\.\d+)?$/,regexText:"\u53ea\u80fd\u8f93\u5165\u6570\u5b57",max:false,min:false,constructor:function(a){Easy.apply(this,a);Easy.UI.Form.NumberField.superclass.constructor.call(this)},initComponent:function(){var a=this;Easy.UI.Form.NumberField.superclass.initComponent.call(a)},initEvent:function(){var a=this,b=Easy.DOM;Easy.UI.Form.NumberField.superclass.initEvent.call(a);if(!a.disabled&&a.dom)Easy.DOM.on(a.dom,"keypress",a.inputText,a)},inputText:function(d,a){var b=this,c=String.fromCharCode(a.keyCode);if(!b.filter.test(c)){a.preventDefault();return false}},validValue:function(){var a=this,b=this.getValue();if(Easy.UI.Form.NumberField.superclass.validValue.call(a)){if(a.max&&b&&b>a.max){a.verifyText=a.maxText||a.label.replace(/\s/g,"")+"\u7684\u503c\u4e0d\u80fd\u5927\u4e8e"+a.max+"\uff01";a.isValid=false;a.maskVerifyText();return false}if(a.min&&b&&b<a.min){a.verifyText=a.minText||a.label.replace(/\s/g,"")+"\u7684\u503c\u4e0d\u80fd\u5c0f\u4e8e"+a.min+"\uff01";a.isValid=false;a.maskVerifyText();return false}}}});Easy.xtype.regist("numberfield",Easy.UI.Form.NumberField);Easy.UI.Form.Textarea=Easy.extend(Easy.UI.Form.TextField,{baseCls:"e-textarea",height:50,constructor:function(a){Easy.apply(this,a);Easy.UI.Form.Textarea.superclass.constructor.call(this)},initComponent:function(){var a=this;Easy.UI.Form.TextField.superclass.initComponent.call(a);a.dom=a.create({tag:"textarea",id:a.id,cls:a.baseCls+"-input",style:{width:a.width-a.offsetWidth,height:a.height-a.offsetHeight},value:a.value},a.body);if(a.emptyText){var b=Easy.UI.TextWidth(a.emptyText,a.body,a.placeholderClass);a.placeholderWrap=a.create({tag:"label",cls:a.emptyTextClass,html:a.emptyText,"for":a.id},a.body);a.changePlaceholder()}a.nullable===false&&Easy.DOM.addClass(a.inputWrap,"e-field-error");a.setIconCls(a.iconCls);a.doAutoSize();a.setDisabled(a.disabled);a.setReadOnly(a.readOnly)},doAutoSize:function(){var a=this;Easy.DOM.setStyle(a.dom,{width:a.width-a.offsetWidth,height:a.height-a.offsetHeight});Easy.DOM.setStyle(a.lblWrap,{lineHeight:30})}});Easy.xtype.regist("textarea",Easy.UI.Form.Textarea);Easy.UI.Form.Editor=Easy.extend(Easy.UI.Base,{baseCls:"e-editor",isFormField:true,isSimple:true,offset:8,width:580,labelWidth:70,labelAlign:"right",splitor:":",ready:false,viewSource:false,isFull:false,boxCls:["e-editor-tl","e-editor-tc","e-editor-tr","e-editor-cl","e-editor-cc","e-editor-cr","e-editor-bl","e-editor-bc","e-editor-br"],simpleTools:[["bold","italic","decoration","color","numlist","ollist","autolayout","|","alignleft","aligncenter","alignright","|","clear","remove","addlink","removelink"]],defaultTools:[["font","fontsize","lineheight","undo","redo","|","clear","remove","table","code","quote","addlink","removelink","source"],["bold","italic","decoration","color","numlist","ollist","autolayout","|","alignleft","aligncenter","alignright","|","attach","music","video","flash","img","feeling","|","view","print","full"]],title:{font:"\u5b57\u4f53",fontsize:"\u5b57\u4f53\u5927\u5c0f",lineheight:"\u5b57\u4f53\u884c\u9ad8",undo:"\u64a4\u9500",redo:"\u91cd\u505a",clear:"\u6e05\u9664\u683c\u5f0f",remove:"\u5220\u9664",table:"\u63d2\u5165\u8868\u683c",code:"\u63d2\u5165\u6e90\u4ee3\u7801",quote:"\u5f15\u7528",bold:"\u52a0\u7c97",italic:"\u659c\u4f53",decoration:"\u4e0b\u5212\u7ebf",color:"\u5b57\u4f53\u989c\u8272",numlist:"\u6570\u5b57\u5217\u8868",ollist:"\u65e0\u5e8f\u5217\u8868",autolayout:"\u81ea\u52a8\u5e03\u5c40",alignleft:"\u5c45\u5de6",aligncenter:"\u5c45\u4e2d",alignright:"\u5c45\u53f3",addlink:"\u6dfb\u52a0\u8d85\u94fe\u63a5",removelink:"\u5220\u9664\u8d85\u94fe\u63a5",attach:"\u63d2\u5165\u9644\u4ef6",music:"\u63d2\u5165\u97f3\u4e50",video:"\u63d2\u5165\u89c6\u9891",flash:"\u63d2\u5165Flash\u6587\u4ef6",img:"\u63d2\u5165\u56fe\u7247",feeling:"\u8868\u60c5",view:"\u9884\u89c8",print:"\u6253\u5370",full:"\u5168\u5c4f"},html:{font:"\u5fae\u8f6f\u96c5\u9ed1",fontsize:"14px",lineheight:"13px"},fontName:["\u5b8b\u4f53","\u534e\u6587\u884c\u6977","\u5fae\u8f6f\u96c5\u9ed1","arial"],fontSize:["10px","12px","14px","16px","18px","20px","22px","24px","28px","32px"],lineHeight:["10px","12px","14px","16px","18px","20px","22px","24px","28px","32px"],color:["#000000","#993300","#333300","#003300","#003366","#000080","#333399","#333333","#800000","#FF6600","#808000","#008000","#008080","#0000FF","#666699","#808080","#FF0000","#FF9900","#99CC00","#339966","#33CCCC","#3366FF","#800080","#969696","#FF00FF","#FFCC00","#FFFF00","#00FF00","#00FFFF","#00CCFF","#993366","#C0C0C0","#FF99CC","#FFCC99","#FFFF99","#CCFFCC","#CCFFFF","#99CCFF","#CC99FF","#FFFFFF"],floaMenu:{color:null,font:null},cacheHtml:[""],currentIndex:-1,constructor:function(b){var a=this;a.cacheHtml=[""];Easy.apply(a,b);a.tools=b.tools||(a.isSimple?a.simpleTools:a.defaultTools);if(a.isSimple)a.viewSource=false;if(!a.label)a.labelWidth=0;else if(Easy.isNumber(a.width))a.width+=a.labelWidth;Easy.UI.Form.Editor.superclass.constructor.call(a)},initComponent:function(){var a=this;a.body=a.create({tag:"td",cls:a.boxCls[4],valign:"top",style:{width:Easy.isNumber(a.width)?a.width-a.offset:"auto"}});a.toolWrap=a.create({tag:"td",cls:"e-editor-tool-cc",valign:"top",style:{height:a.isSimple?26:50}});var b=a.editor=a.create({tag:"table",style:{width:a.width||"auto",height:a.height||"auto"},cellpadding:0,cellspacing:0,children:{tag:"tbody",children:[{tag:"tr",children:[{tag:"td",cls:a.boxCls[0]},{tag:"td",cls:a.boxCls[1]},{tag:"td",cls:a.boxCls[2]}]},{tag:"tr",children:[{tag:"td",cls:"e-editor-tool-cl"},a.toolWrap,{tag:"td",cls:"e-editor-tool-cr"}]},{tag:"tr",children:[{tag:"td",cls:a.boxCls[3]},a.body,{tag:"td",cls:a.boxCls[5]}]},{tag:"tr",children:[{tag:"td",cls:a.boxCls[6]},{tag:"td",cls:a.boxCls[7]},{tag:"td",cls:a.boxCls[8]}]}]}});a.textarea=a.create({tag:"textarea",style:{width:a.width-10,display:"none"}},a.body);a.iframe=a.create({tag:"iframe",id:"editor-"+a.id,name:"editor-"+a.id,border:0,frameborder:0,src:"about:blank",style:{width:a.width-10}},a.body);a.lblWrap=a.create({tag:"label",cls:"e-field-label","for":a.id,html:a.label?a.label+a.splitor:a.defaultValue,style:{width:a.labelWidth,"text-align":a.labelAlign,lineHeight:25}});a.wrap=a.create({tag:"div",cls:"e-field-item "+a.baseCls,children:[a.lblWrap,b]});a.render(this.renderTo?Easy.DOM.get(this.renderTo):null);(!a.label||a.hideLabel)&&Easy.DOM.hide(a.lblWrap);a.initTools();a.initStatus(true);a.syncValue(true)},initEvent:function(){var a=this,b=new Easy.Timer(function(){var c=a.getDoc();if(a.ready&&c&&c.body){c.body.innerHTML=a.defaultValue;a.autoSave();Easy.DOM.on(a.getDoc(),"keydown",a.fixKeys,a);Easy.DOM.on(a.getDoc().body,"click",function(){Easy.each(a.floaMenu,function(a){a&&a.hide&&a.hide()})});Easy.DOM.on(a.getDoc().body,"blur",function(){a.syncValue(false)});b.destroy()}},10)},initTools:function(){var a=this,b;if(a.isSimple)a.initToolWrap();else a.initToolWrap()},initToolWrap:function(){var a=this;Easy.each(a.tools,function(d){var c=a.create({tag:"div",cls:"e-editor-tool-wrap"},a.toolWrap),b=a.create({tag:"ul"},c);Easy.each(d,function(c){a.initToolItem(c,b)})})},initToolItem:function(a,d){var b=this,c;if(a=="|")a="split";if(a=="source")c="";else{c=b.create({tag:"a",href:"javascript:void(0)",html:b.html[a]||"",title:b.title[a]});Easy.DOM.on(c,"focus",function(b,a){b.blur();a.stop()})}var e=b.create({tag:"li",cls:a,children:c},d);if(a=="source")var f=b.create({tag:"li",cls:"sourceText",html:"\u6e90\u4ee3\u7801"},d);Easy.DOM.on(e,"click",b.toolClick,b,a)},toolClick:function(c,d,b){var a=this;b=="source"&&Easy.DOM.toggleClass(c,"source-avtive");a.methods[b].call(a,c,d)},methods:{font:function(e,c){var a=this,d=function(f,e){a.floaMenu.font=null;var d=Easy.String.trimHtml(e.target.innerHTML);a.execute("FontName",false,d);b.hide();c.target.innerHTML=d},b=new Easy.UI.BoxContainer({width:83+(a.fontName.length>8?+20:0),renderTo:a.body,bodyVAlign:"top",style:{top:52,position:"absolute"},items:{tag:"ul",cls:"font-wrap",style:{height:a.fontName.length>8?190:"auto"},children:function(){var b=[];Easy.each(a.fontName,function(a){b.push({tag:"li",children:{tag:"a",href:"javascript:void(Easy)",style:{fontFamily:a},html:a}})});return b}()}});a.floaMenu.font=b;Easy.DOM.showAt(b.wrap,c.target,"b");Easy.DOM.on(b.body,"click",d,a)},fontsize:function(f,c){var a=this,d="EasyJavascriptFontName",e=function(k,f){var a=this,g=a.getDoc();a.floaMenu.fontsize=null;a.execute("FontName",false,d);var h=g.body.getElementsByTagName("FONT"),e=[];e=Easy.Array.map(h,function(a){if(Easy.DOM.getAttribute(a,"face")==d)return a});var i,j;Easy.each(e,function(a,b){if(b===0)i=a;j=a;Easy.DOM.removeAttribute(a,"face");Easy.DOM.setStyle(a,{fontSize:f.target.innerHTML})});b.hide();c.target.innerHTML=f.target.innerHTML},b=new Easy.UI.BoxContainer({width:47+(a.fontSize.length>8?+20:0),renderTo:a.body,bodyVAlign:"top",style:{top:52,position:"absolute"},items:{tag:"ul",cls:"font-wrap",style:{height:a.fontSize.length>8?190:"auto"},children:function(){var b=[];Easy.each(a.fontSize,function(a){b.push({tag:"li",children:{tag:"a",href:"javascript:void(Easy)",html:a}})});return b}()}});a.floaMenu.fontsize=b;Easy.DOM.showAt(b.wrap,c.target,"b");Easy.DOM.on(b.body,"click",e,a)},lineheight:function(f,c){var a=this,d="EasyJavascriptFontName",e=function(k,f){var a=this,g=a.getDoc();a.floaMenu.lineheight=null;a.execute("FontName",false,d);var h=g.body.getElementsByTagName("FONT"),e=[];e=Easy.Array.map(h,function(a){if(Easy.DOM.getAttribute(a,"face")==d)return a});var i,j;Easy.each(e,function(a,b){if(b===0)i=a;j=a;Easy.DOM.removeAttribute(a,"face");Easy.DOM.setStyle(a,{lineHeight:Easy.String.trimHtml(f.target.innerHTML)})});b.hide();c.target.innerHTML=f.target.innerHTML},b=new Easy.UI.BoxContainer({width:47+(a.lineHeight.length>8?+20:0),renderTo:a.body,bodyVAlign:"top",style:{position:"absolute"},items:{tag:"ul",cls:"font-wrap",style:{height:a.lineHeight.length>8?190:"auto"},children:function(){var b=[];Easy.each(a.lineHeight,function(a){b.push({tag:"li",children:{tag:"a",href:"javascript:void(Easy)",html:a}})});return b}()}});a.floaMenu.lineheight=b;Easy.DOM.showAt(b.wrap,c.target,"b");Easy.DOM.on(b.body,"click",e,a)},undo:function(){var a=this;a.saveCurrent();if(a.cacheHtml.length>0&&a.currentIndex>0)a.currentIndex--;a.setValue(a.cacheHtml[a.currentIndex])},redo:function(){var a=this;a.saveCurrent();if(a.cacheHtml.length>0&&a.currentIndex<a.cacheHtml.length-1)a.currentIndex++;a.setValue(a.cacheHtml[a.currentIndex])},clear:function(){var a=this;a.execute("RemoveFormat",false)},remove:function(){var b=this,a=b.getRange();if(Easy.isIE)a.pasteHTML("");else{a.deleteContents();a.insertNode("")}},table:function(){var a=this,b=a.getSeletion()},code:function(){var a=this,b=a.getSeletion()},quote:function(){var a=this,b=a.getSeletion()},bold:function(){var a=this;a.execute("Bold",false)},italic:function(){var a=this;a.execute("Italic",false)},decoration:function(){var a=this;a.execute("Underline",false)},color:function(e,d){var a=this,c=function(e,c){a.floaMenu.color=null;var d=Easy.DOM.getStyle(c.target,"backgroundColor");a.execute("ForeColor",false,d);b.hide()},b=new Easy.UI.BoxContainer({width:100,renderTo:a.body,bodyVAlign:"top",style:{top:52,position:"absolute"},items:{tag:"ul",cls:"color-wrap",children:function(){var b=[];Easy.each(a.color,function(a){b.push({tag:"li",children:{tag:"a",href:"javascript:void(Easy)",style:{backgroundColor:a}}})});return b}()}});a.floaMenu.color=b;Easy.DOM.showAt(b.wrap,d.target,"b");Easy.DOM.on(b.body,"click",c,a)},numlist:function(){var a=this;a.execute("InsertOrderedList",false)},ollist:function(){var a=this;a.execute("InsertUnorderedList",false)},autolayout:function(){for(var d=this,c=d.getDoc().body,b=c.childNodes,a=0;a<b.length;a++)if(b[a].tagName){b[a].innerHTML=b[a].innerHTML.split("&nbsp;").join("\ue7c7");b[a].innerHTML=b[a].innerHTML.replace(/(^[ |\u3000|\ue7c7]*)|([ |\u3000|\ue7c7]*$)/g,"");b[a].innerHTML=b[a].innerHTML.split("\ue7c7").join("&nbsp;");b[a].style.textIndent=!b[a].style.textIndent?"2em":""}else c.innerHTML=Easy.String.format('<div style="text-indent:2em;">{0}</div>',c.innerHTML.replace(/(^[ |\u3000]*)|([ |\u3000]*$)/g,""))},alignleft:function(){var a=this,b=a.getSeletion();a.execute("JustifyLeft",false)},aligncenter:function(){var a=this,b=a.getSeletion();a.execute("JustifyCenter",false)},alignright:function(){var a=this,b=a.getSeletion();a.execute("JustifyRight",false)},addlink:function(){var a=this;a.execute("CreateLink",false)},removelink:function(){var a=this;a.execute("UnLink",false)},attach:function(){var a=this,b=a.getSeletion()},music:function(){var a=this,b=a.getSeletion()},video:function(){var a=this,b=a.getSeletion()},flash:function(){var a=this,b=a.getSeletion()},img:function(){var a=this,b=a.getSeletion()},feeling:function(){var a=this,b=a.getSeletion()},view:function(){var i=this,g=640,e=420,h=80;try{var b=window.screen;g=Math.round(b.width*.8);e=Math.round(b.height*.7);h=Math.round(b.width*.1)}catch(j){}var d=i.getValue(),c="";if(Easy.isCustomDomain()){window.__Easy_Editor_html=d;c='javascript:void( (function(){document.open();document.domain="'+document.domain+'";document.write( window.opener.__Easy_Editor_html );document.close();window.opener.__Easy_Editor_html = null;})() )'}var f=window.open(c,null,"");if(!Easy.isCustomDomain()){var a=f.document;a.open();a.write(d);a.close();Easy.isWebKit&&setTimeout(function(){a.body.innerHTML+=""},0)}},print:function(){var a=this;a.getWin().print()},full:function(){var a=this,b=Easy.getSize();if(!a.isFull){Easy.DOM.setStyle(a.editor,{position:"absolute",top:0,left:0});a.old={width:a.width,height:a.height};a.width=b.width;a.height=b.height-2}else{Easy.DOM.setStyle(a.editor,{position:"inherit"});a.width=a.old.width;a.height=a.old.height}a.doAutoSize();a.isFull=!a.isFull},source:function(){var a=this;a.initStatus()}},getDoc:function(){return Easy.isIE?this.getWin().document:this.iframe.contentDocument||this.getWin().document},getWin:function(){return Easy.isIE?this.iframe.contentWindow:window.frames[this.iframe.name]},execute:function(d,e,c){var b=this,a=b.getDoc();a.execCommand(d,false,c)},insertAtCursor:function(b){var a=this;if(!a.ready)return;if(Easy.isIE){a.getWin().focus();var d=a.getDoc(),c=d.selection.createRange();c&&c.pasteHTML(b)}else{a.getWin().focus();a.execute("InsertHTML",b)}a.focus()},getSeletion:function(){var a=this,f=a.getWin(),e=Easy.getDoc();if(a.ready)if(!a.readOnly)if(Easy.isGecko||Easy.isOpera||Easy.isChrome){selection=f.getSelection();a.focus();try{b=selection?selection.getRangeAt(0):e.createRange();return b.cloneContents()}catch(g){return}}else{var b=e.selection.createRange();if(b.htmlText&&b.text)return b.htmlText;else{for(var d="",c=0;c<b.length;c++)d+=b.item(c).outerHTML;return d}}else return!Easy.isDefined(a.textarea.selectionStart)?a.textarea.value.substr(a.textarea.selectionStart,a.textarea.selectionEnd-a.textarea.selectionStart):document.selection&&document.selection.createRange?document.selection.createRange().text:window.getSelection?window.getSelection()+"":false},getRange:function(){var a=this,c=a.getWin(),b=a.getDoc();if(a.ready)return Easy.isIE?b.selection.createRange():c.getSelection().getRangeAt(0)},focus:function(){var a=this,g=a.getWin(),d=a.getDoc(),b=Easy.readOnly?a.textarea:a.iframe;b.focus();if(Easy.isChrome&&!b.safarifocus){var e=g.getSelection(),f=d.body.lastChild,c=d.createRange();c.selectNodeContents(f);e.removeAllRanges();e.addRange(c);b.safarifocus=true}},initStatus:function(){var a=this,b=function(){if(a.viewSource){Easy.DOM.show(a.textarea);Easy.DOM.hide(a.iframe);a.textarea.value=a.getDoc().body.innerHTML}else{Easy.DOM.show(a.iframe);Easy.DOM.hide(a.textarea);a.getDoc().body.innerHTML=a.textarea.value}a.viewSource=!a.viewSource;if(!a.readOnly){a.getDoc().designMode="on";a.getDoc().contentEditable=true}else{a.getDoc().designMode="off";a.getDoc().contentEditable=false}var b=new Easy.Timer(function(){var c=a.getDoc().body;if(c){b.destroy();Easy.DOM.setStyle(c,{padding:0,margin:0})}},10);a.ready=true};if(a.ready)b();else Easy.DOM.on(a.iframe,"load",function(){b();Easy.DOM.un(a.iframe,"load",arguments.callee)})},getValue:function(){return this.getDoc().body.innerHTML},setValue:function(b){var a=this;if(a.ready)a.getDoc().body.innerHTML=b;else var c=new Easy.Timer(function(){if(a.getDoc()&&a.getDoc().body){c.destroy();a.getDoc().body.innerHTML=b}},10)},autoSave:function(){var a=this;new Easy.Timer(function(){var b=a.getValue();if(a.cacheHtml[a.cacheHtml.length-1]!=b&&a.currentIndex==a.cacheHtml.length-1){a.cacheHtml.push(b);a.currentIndex=a.cacheHtml.length-1}},18000)},saveCurrent:function(){var a=this,b=a.getValue();a.cacheHtml[a.cacheHtml.length-1]!=b&&a.currentIndex==a.cacheHtml.length-1&&a.cacheHtml.push(b)},onRender:function(b){var a=this;a.renderTo=b;a.doAutoSize()},doAutoSize:function(){var a=this;if(!Easy.isNumber(a.height))a.height=a.width*.6;var b=Easy.isNumber(a.width)?a.width-a.labelWidth-6:"auto";Easy.DOM.setStyle(a.body,{width:Easy.isNumber(b)?b-a.offset:"auto",height:a.height-54+(a.isSimple?24:0)});Easy.DOM.setStyle(a.editor,{width:Easy.isNumber(b)?b:"auto",height:a.height||"auto"});Easy.DOM.setStyle(a.wrap,{width:a.width||"auto",height:a.height||"auto"});Easy.DOM.setStyle(a.iframe,{height:a.height-54+(a.isSimple?24:0),width:Easy.isNumber(b)?b-a.offset:"auto"});Easy.DOM.setStyle(a.textarea,{height:a.height-56+(a.isSimple?24:0),width:Easy.isNumber(b)?b-a.offset-2:"auto"})},fixKeys:function(){return Easy.isIE?function(f,c){var d=c.getKey(),e=this.getDoc(),a=e.selection.createRange();c.stop();if(d==9){if(a){a.collapse(true);a.pasteHTML("&nbsp;&nbsp;&nbsp;&nbsp;");this.focus()}}else if(d==13)if(a){var b=a.parentElement();if(!b||b.tagName.toLowerCase()!="li"){a.pasteHTML("<br />");a.collapse(true);a.select()}}}:Easy.isOpera?function(c,a){var b=a.getKey();if(b==9){a.stop();this.getWin().focus();this.execute("InsertHTML","&nbsp;&nbsp;&nbsp;&nbsp;");this.focus()}}:Easy.isWebKit?function(c,a){var b=a.getKey();if(b==9){a.stop();this.execute("InsertText","\t");this.focus()}else if(b==13){a.stop();this.execute("InsertHtml","<br />");this.focus()}}:void 0}(),syncValue:function(c){var a=this,b=function(){if(c&&(a.el||a.value)){if(!a.value&&a.el)a.value=a.el.value||a.el.innerHTML;a.textarea.value=a.getDoc().body.innerHTML=a.value}else if(a.viewSource)a.textarea.value=(a.getDoc().body||{}).innerHTML;else a.getDoc().body.innerHTML=a.textarea.value};if(a.ready)b();else Easy.DOM.on(a.iframe,"load",function(){b();Easy.DOM.un(a.iframe,"load",arguments.callee)})}});Easy.xtype.regist("editor",Easy.UI.Form.Editor);Easy.data.Store=function(b){var a=this,c={id:Easy.guid++,modal:"remote",data:null,cacheData:null,success:Easy.emptyFn,noMask:false,baseParams:{},autoLoad:true,remoteSort:true,method:"post",modify:[],root:null,totalField:null,target:null,processResponse:function(d){var c,b=0;if(a.root){c=d[a.root]||[];b=d[a.totalField]||0}else{c=d;b=a.cacheData.length}if(a.target){a.target.initData.call(a.target,c,b||0);a.target.fireEvent("load",a.target,c,b||0)}},callback:function(d,e){try{if(this.status==200){a.success(d,e);var c=Easy.decode(d);if(c.exception){a.exception.call(a,d,this.statue);return false}if(c){if(a.root&&!c[a.root]){c={};c[a.root]=[];c[a.totalField]=0}}else if(a.root){c={};c[a.root]=[];c[a.totalField]=0}else c=[];a.data=a.cacheData=c;!a.remoteSort&&a.sort();a.processResponse.call(a,c,d,b)}}catch(f){new Easy.Error(f)}finally{if(a.mk){a.mk.close();a.mk=null}}},load:function(b){var a=this;a.baseParams.sort=a.sortField;a.baseParams.dir=a.regular;Easy.apply(a.baseParams,b);if(a.modal=="local")a.loadData(a.cacheData);else a.loadByAjax(b)},reload:function(d,c){if(c){a.cacheData=null;a.load(Easy.apply(a.baseParams,d))}else{var b=a.data;a.success(b,a);if(b.exception){new Easy.Error(b);return false}a.target.fireEvent("load",a.target);a.data=a.cacheData=b;a.processResponse.call(a,b,"",a)}},loadByAjax:function(c){if(!a.noMask&&a.target&&a.target.wrap){a.mk=new Easy.UI.Mask({message:a.loadText||"\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u7b49...",el:a.target.wrap});a.mk.show()}var b=Easy.apply(a.baseParams,c);Easy.Ajax.request({url:a.url,method:a.method,params:b,callback:a.callback})},loadData:function(d){if(d){a.root&&a.sort(a.data[a.root]);a.data=d}a.cacheData=a.data;var c={};if(a.totalField)c[a.totalField]=a.data[a.totalField];var e=function(){return a.root?[].concat(a.data[a.root]):[].concat(a.data)}().splice(a.baseParams.start||0,a.baseParams.limit||d.length);if(a.root)c[a.root]=e;else c=e;a.processResponse.call(a,c,"",b)},add:function(b,c){var a=this;a.modify.push({data:b,action:"ADD"});if(!a.root)a.cacheData.splice(c,0,b);else a.cacheData[a.root].splice(c,0,b)},remove:function(b){var a=this;if(Easy.isNumber(b))if(a.root)a.cacheData[a.root].splice(b,1);else a.cacheData.splice(b,1);else a.root?a.cacheData[a.root]:(a.cacheData=Easy.Array.remove(a.root?a.cacheData[a.root]:a.cacheData,data,function(b,c){return b[a.target.primaryKey]==c[a.target.primaryKey]}));a.modify.push({data:a.target.data[b],action:"DELETE"})},sort:function(b){if(a.sortField)return Easy.Array.sort(b,a.regular,a.sortField)},exception:function(b){if(a.target){a.target.fireEvent("exception",a.target);new Easy.Error(b)}},init:function(b){a.sortField=a.baseParams.sort;a.regular=a.baseParams.dir;if(a.modal!="local")a.autoLoad&&a.load(Easy.apply(a.baseParams,b||{}));else if(a.data){if(Easy.isEmptyObject(a.baseParams))a.baseParams={start:0,limit:(a.data||[]).length};a.loadData(a.data)}}};Easy.apply(a,c);Easy.apply(a,b);return a};Easy.xtype.regist("store",Easy.data.Store);Easy.data.JsonStore=Easy.extend(Easy.data.Store,{});Easy.xtype.regist("jsonstore",Easy.data.JsonStore);Easy.data.ArrayStore=Easy.extend(Easy.data.Store,{root:false,modal:"local"});Easy.xtype.regist("arraystore",Easy.data.ArrayStore);Easy.UI.Grid=Easy.extend(Easy.UI.Base,{height:"auto",url:"/base.ashx",root:"Records",totalField:"Count",_primaryKey:"___Er",baseCls:"e-grid",noPaging:false,mutilSelect:false,model:"remote",rows:[],data:{},header:null,wrap:null,body:null,table:null,rowWrap:null,pagingbar:null,columns:[],colCount:0,autoFill:false,scrollBarWidth:20,frame:true,border:null,sm:null,allowSelectText:false,minAutoWidth:120,innerWidth:"auto",stripeRows:true,rowNumberContinue:true,pagingConfig:{},store:null,listeners:{},autoHide:false,towCilckUnSelect:true,defaultRenderer:function(a){return a===null||a===undefined?"":a},constructor:function(b){var a=this;a.pagingbar=null;Easy.apply(a,b);Easy.UI.Grid.superclass.constructor.call(this)},initComponent:function(){var a=this,q=[],e=[],i=[],b=a.scrollBarWidth+3,c,f,o,d="auto",j=a.width,g=0,m=0;Easy.each(a.columns,function(c,d){if(Easy.isNumber(c.width)){b+=c.width;g+=c.width;a.autoFill=a.autoFill||false}else{if(!Easy.isNumber(a.width))a.autoFill=true;m++;b+=a.minAutoWidth}c.id=c.id||"col-"+d});if(a.renderTo)if(a.width){if(b>a.width)d=a.minAutoWidth;a.innerWidth=a.width-2;a.width=a.width||b}else{var h=Easy.DOM.getInnerWidth(Easy.get(a.renderTo));if(b>h)d=a.minAutoWidth;j=h;a.innerWidth=Math.max(h,b)-2;a.width=h}var t=[],l=[];if(a.autoHide){var s=Easy.Array.sortAsc([].concat(a.columns),"order");Easy.each(s,function(a){if(!isNaN(a.order))if(j<b){l.push(a);b-=a.width;g-=a.width}else return false});a.innerWidth=a.width-2}var p=a.innerWidth;if(p>g)d=(p-g-a.scrollBarWidth)/m;var r=function(b,h){if(b.wrap){f=b.wrap.firstChild;c=b.wrap;b.cls=Easy.String.trim(b.cls);if(b.isSM&&b.multiSelect)Easy.DOM.on(c,"click",function(c){a[c.checked?"removeClass":"addClass"](c.firstChild,b.cls+"-checked");a.selectAll(c.checked=!c.checked)})}else{var g="e-head-center";if(h==2)g+=" noborder";f=a.create({tag:"span",cls:b.sortable?"e-sortable":"",style:{textAlign:b.align||"left",width:!Easy.isNumber(b.width)?d-7:b.width-7},html:(b.header||"&#160;")+(b.sortable?"<img src="+Easy.BLANK_IMAGE_URL+" />":"")});c=a.create({tag:"td",style:{width:b.width||d},cls:g,children:f});if(!b.width)o=c}if(a.autoHide)if(Easy.Array.has(l,b,function(a,b){return a.id==b.id}))b.hidden=true;q.push(f);e.push(c);b.hidden&&Easy.DOM.hide(c);i.push({isSys:b.isSM?1:b.isNum?2:0,cls:b.cls,cfg:b,dom:c,textWrap:f,sortfield:b.sortfield||b.field,sortable:b.sortable,align:b.align||"left",renderer:b.renderer,field:b.field,text:b.header,width:b.width||d,hidden:!!b.hidden})};Easy.each(a.columns,function(d,c){var b=c;if(c==a.columns.length-1)b=2;else b=1;r(d,b);a.colCount++});a.autoExpandColumnTD=o;a.columnConfig=i;e.unshift(a.create({tag:"td",cls:"e-head-first",style:{width:a.frame?3:2},html:"<span></span>"}));var n=a.wrap=a.create({tag:"div",cls:a.baseCls,style:{width:a.width,height:a.height||"auto"}}),k=a.bodyWrap=a.create({tag:"div",cls:a.baseCls+"-headbody-wrap"},n),v=a.header=a.create({tag:"div",cls:a.baseCls+"-head-wrap"+(!a.frame?" noframe":""),children:{tag:"table",border:"0",width:"100%",cellpadding:"0",cellspacing:"0",children:{tag:"tbody",children:{tag:"tr",children:e}}}},k),u=a.body=a.create({tag:"div",cls:a.baseCls+"-body-wrap",children:a.table=a.create({tag:"table",border:"0",width:"100%",cellpadding:"0",cellspacing:"0",children:a.rowWrap=a.create({tag:"tbody"})})},k);if(a.border===false){Easy.DOM.setStyle([e[0],a.header,a.body],{borderLeft:0,borderRight:0});Easy.DOM.setStyle([a.body,e[0]],{paddingLeft:1,borderBottom:0})}a.createStore();if(!a.noPaging)a.pagingbar=new Easy.UI.Pagingbar(Easy.applyIf({store:a.store,renderTo:n,target:a},a.pagingConfig));else Easy.DOM.setStyle(a.body,{borderBottom:"#c7c7c7 1px solid"});a.hideHeaders&&a.hideHeader();a.renderTo&&a.render(a.renderTo);a.load()},initEvent:function(){var a=this;Easy.each(a.columnConfig,function(b,c){if(b.sortable)Easy.DOM.on(b.dom,"click",a.headerCellClick,a,[b,c])});if(a.autoFill)Easy.DOM.on(window,"resize",a.onWindowResize,a)},initRowEvent:function(a,c){var b=this;Easy.DOM.on(a,"mouseover",b.rowOver,b,[a,c],false);Easy.DOM.on(a,"mouseout",b.rowOut,b,[a,c],false);Easy.DOM.on(a,"click",b.rowClick,b,[a,c,true],false);Easy.DOM.on(a,"dblclick",b.rowDblClick,b,[a,c],false)},initData:function(b,c){var a=this;a.clearRows();if(b!=null&&Easy.isArray(b)&&b.length!=0)Easy.each(b,function(b,c){a.addRow(b,null,true);if(a.primaryKey)a.data[b[a.primaryKey]]=b;else{b[a.primaryKey||a._primaryKey]=c;a.data[c]=b}});else(Easy.isIE9||Easy.isIE10||Easy.isIE8)&&Easy.DOM.setStyle(a.body,{height:3});a.pagingbar&&a.pagingbar.refresh(a,c);a.fireEvent("viewready",a)},clearRows:function(){var a=this;Easy.each(a.rows,function(b,c){Easy.DOM.un(b,"mouseover",a.rowOver,a,[b,c],false);Easy.DOM.un(b,"mouseout",a.rowOut,a,[b,c],false);Easy.DOM.un(b,"click",a.rowClick,a,[b,c],false);Easy.DOM.un(b,"dblclick",a.rowDblClick,a,[b,c],false);b.sms=null;Easy.removeNode(b)});a.rows=[];a.data={}},addRow:function(b,c,j){var a=this,g=[],f=[],e=Easy.isNumber(c)?c:a.rows.length;if(a.primaryKey&&a.data[b[a.primaryKey]]){new Easy.Error("In this grid, the primary key '"+b[a.primaryKey]+"' is exist!");return false}var i=function(c,l,h){var k="e-cell",d;if(c.isSys==1){d=a.create({tag:"span",cls:"e-grid-column-text "+c.cls,style:{width:c.width=="auto"?"auto":c.width-8,paddingRight:1},value:(c.renderer||a.defaultRenderer).call(a,b[a.primaryKey],b,c,h,e)});d.baseCls=c.cls;d.checked=false;f.push(d)}else if(c.isSys==2){var j=0;if(a.rowNumberContinue)j=(a.store.baseParams||{start:0}).start;d=a.create({tag:"span",cls:"e-grid-column-text "+c.cls,style:{width:c.width=="auto"?"auto":c.width-7},html:e+1+j,value:(c.renderer||a.defaultRenderer).call(a,b[a.primaryKey],b,c,h,e)});d.baseCls=c.cls;f.push(d)}else d=a.create({tag:"span",cls:"e-grid-column-text",style:{textAlign:c.align,width:!Easy.isNumber(c.width)?"auto":c.width-7},html:(c.renderer||a.defaultRenderer).call(a,b[c.field],b,c,h,e)});var i=a.create({tag:"td",style:{width:c.width},cls:k,children:d});g.push(i);c.hidden&&Easy.DOM.hide(i);!a.allowSelectText&&Easy.DOM.unUserSelect(i)};Easy.each(a.columnConfig,function(b,a){i(b,1,a)});g.unshift(a.create({tag:"td",cls:"e-cell-f",html:"<span>&#160;</span>"}));var d=a.create({tag:"tr",rowID:e,cls:"e-grid-row",children:g});d.sms=f;if(!Easy.isNumber(c)){a.rowWrap.appendChild(d);var h="e-grid-last-row";a.rows.length>0&&Easy.DOM.replaceClass(a.rows[a.rows.length-1],"e-grid-last-row","e-grid-row");if(a.stripeRows&&a.rows.length%2)h+=" e-grid-row-stripe";Easy.DOM.replaceClass(d,"e-grid-row",h);a.rows.push(d);c=a.rows.length-1}else{Easy.DOM.insertBefore(d,a.rows[c]);a.rows.splice(c-1,0,d);a.doStripeRow()}d.selected=false;if(!j){var k;if(a.primaryKey)a.data[b[a.primaryKey]]=b;else{b[a.primaryKey||a._primaryKey]=c;a.data[c]=b}a.store.add(b,c);a.pagingbar&&a.pagingbar.refresh(a,a.pagingbar.totalRecord+=1)}a.initRowEvent(d,c);a.fireEvent("rowadded",a)},removeRow:function(b,c){var a=this,e=a.rows[b];Easy.removeNode(e);a.rows.splice(b,1);if(!c){a.store.remove(b);delete a.data[b];a.pagingbar&&a.pagingbar.refresh(a,a.pagingbar.totalRecord-=1)}var d=a.rows.slice(b,a.rows.length);Easy.each(d,function(a,c){a&&Easy.DOM.setAttribute(a,"rowID",b-0+c)});a.fireEvent("rowremoved",a,b)},getRowIndex:function(a){if(Easy.isString(a))return 0},rowOver:function(b,c){var a=this;a.addClass(b,a.baseCls+"-row-over");a.fireEvent("rowover",a,b,c)},rowOut:function(b,c){var a=this;a.removeClass(b,a.baseCls+"-row-over");a.fireEvent("rowout",a,b,c)},rowClick:function(a,c,e){var b=this;if(a.selected&&!b.towCilckUnSelect)return false;if(!a.selected||a.selected&&b.towCilckUnSelect){b[a.selected?"removeClass":"addClass"](a,b.baseCls+"-row-selected");Easy.each(a.sms,function(c){b[a.selected?"removeClass":"addClass"](c,Easy.String.trim(c.baseCls)+"-checked");c.checked=!a.selected});var d=b.getSelectModel();d&&!d.cfg.multiSelect&&!a.selected&&b.deselectOther(c);a.selected=!a.selected;e&&b.fireEvent("rowclick",b,a,c)}},rowDblClick:function(c,b){var a=this;a.rowClick(c,b,false);a.fireEvent("rowdblclick",a,c,b)},deselectOther:function(b){var a=this;Easy.each(a.rows,function(c,d){if(d!=b){a.removeClass(c,a.baseCls+"-row-selected");Easy.each(c.sms,function(b){a.removeClass(b,b.baseCls+"-checked");b.checked=false})}c.selected=false})},selectAll:function(a){var b=this;Easy.each(b.rows,function(c){b[a?"addClass":"removeClass"](c,b.baseCls+"-row-selected");Easy.each(c.sms,function(c){b[a?"addClass":"removeClass"](c,Easy.String.trim(c.baseCls)+"-checked");c.checked=a});c.selected=a})},headerCellClick:function(e,d,b){var a=this;a.store.sortField=b.sortfield;if(Easy.DOM.hasClass(b.textWrap,"e-sort-desc")){a.store.regular="asc";a.removeClass(b.textWrap,"e-sort-desc")}else if(Easy.DOM.hasClass(b.textWrap,"e-sort-asc")){a.store.regular="desc";a.removeClass(b.textWrap,"e-sort-asc")}else a.store.regular=a.store.regular=="desc"?"asc":"desc";a.store.load();a.addClass(b.textWrap,"e-sort-"+a.store.regular)},createStore:function(){var a=this;if(!a.store&&a.url)a.store=new Easy.data.Store({url:a.url,root:a.root,totalField:a.totalField,baseParams:a.baseParams,target:a,autoLoad:true});if(a.store)a.store.target=a},load:function(){var a=this;a.store.init()},doAutoSize:function(e,d){var a=this,b=a.height,c=Easy.DOM.getInnerWidth(Easy.get(a.renderTo));if(a.autoFill===true&&c>a.width)a.width=c;else a.width=a.width;a.width=e||a.width;a.height=d||a.height;Easy.DOM.setStyle(a.wrap,{width:a.width,height:a.height});Easy.DOM.setStyle([a.header,a.body,a.bodyWrap],{width:a.innerWidth});a.pagingbar&&Easy.DOM.setStyle(a.pagingbar.wrap,{width:a.width});a.autoColumnWidth();if(Easy.isNumber(b)){if(a.pagingbar)b-=32;if(!a.hideHeaders)b-=32;Easy.DOM.setStyle(a.body,{height:Math.max(0,b)})}},autoColumnWidth:function(){var a=this;a.fireEvent("autowidth",a)},getSelectModel:function(){var a=this;return a.sm!=null?Easy.isNumber(a.sm)?a.columnConfig[a.sm]:a.sm:null},getSelection:function(){var b=this,a=[];Easy.each(b.rows,function(d,c){d.selected&&a.push(b.data[c])});return a},getValue:function(b){var c=this,a=c.getSelection();return a&&a.length>0?a[0][b]:undefined},getValues:function(b){var c=this,a=c.getSelection();return a?Easy.Array.map(a,function(a){return a[b]}):[]},doStripeRow:function(){var a=this;Easy.each(a.rows,function(c,b){a.addClass(c,b%2?"e-grid-row-stripe":"")})},hideHeader:function(){var a=this;Easy.DOM.hide(a.header)},showHeader:function(){var a=this;Easy.DOM.show(a.header)},hideColumn:function(a){var b=this,d=Easy.DOM.getChildren(b.header,"table")[0];Easy.DOM.hide(d.rows[0].cells[a]);var c=b.table.rows;Easy.each(c,function(b){Easy.DOM.hide(b.cells[a])});b.columnConfig[a-1].hidden=true},showColumn:function(a){var b=this,d=Easy.DOM.getChildren(b.header,"table")[0];Easy.DOM.show(d.rows[0].cells[a]);var c=b.table.rows;Easy.each(c,function(b){Easy.DOM.show(b.cells[a])});b.columnConfig[a-1].hidden=false},onWindowResize:function(){var a=this;a.doAutoSize()},onRender:function(b){var a=this;a.renderTo=b;a.doAutoSize()},onViewready:function(){var a=this;a.stripeRows&&a.doStripeRow();a.doAutoSize()}});Easy.xtype.regist("grid",Easy.UI.Grid);Easy.UI.Pagingbar=Easy.extend(Easy.UI.Base,{height:32,hideInfo:false,hideBtn:false,width:"auto",baseCls:"e-paging",buttons:[],elements:[],target:null,noDataInfo:"\u5f53\u524d\u6ca1\u6709\u4efb\u4f55\u6570\u636e\uff01",infoTpl:"<SPAN class=e-paging-info>\u5f53\u524d\u7b2c<B>{0}</B>-<B>{1}</B>\u6761\uff0c\u5171<B>{2}</B>\u6761</SPAN>",constructor:function(b){var a=this;a.buttons=[];a.elements=[];a.btns=[];Easy.apply(a,b);Easy.UI.Pagingbar.superclass.constructor.call(this)},initComponent:function(){var a=this,e=Easy.BLANK_IMAGE_URL;a.body=a.create({tag:"div",cls:a.baseCls+"-c"});a.wrap=Easy.DOM.create({tag:"div",cls:a.baseCls,style:{width:a.width,height:a.height},children:[{tag:"div",cls:a.baseCls+"-left",children:a.body}]},a.renderTo?Easy.get(a.renderTo):null);var b=a.btns=[a.create({tag:"span",cls:a.baseCls+"-first",value:"f",title:"\u7b2c\u4e00\u9875"}),a.create({tag:"span",cls:a.baseCls+"-pre",value:"p",title:"\u4e0a\u4e00\u9875"}),a.create({tag:"span",cls:a.baseCls+"-jump",html:"\u7b2c<input type='text' value='0' class='e-paging-current-page' />\u9875\uff0c\u5171<b>0</b>\u9875"}),a.create({tag:"span",cls:a.baseCls+"-next",value:"n",title:"\u4e0b\u4e00\u9875"}),a.create({tag:"span",cls:a.baseCls+"-last",value:"l",title:"\u6700\u672b\u9875"}),a.create({tag:"span",cls:a.baseCls+"-refresh",value:"r",title:"\u5237\u65b0"})],c=a.info=a.create({tag:"div",cls:a.baseCls+"-info-wrap"+(a.hideInfo?" hidden":""),html:"<span class='e-paging-info'>"+a.noDataInfo+"</span>"},a.body),d=a.create({tag:"div",cls:a.baseCls+"-btn-wrap",children:b},a.body);a.hideInfo&&Easy.DOM.hide(c);a.hideBtn&&Easy.DOM.hide(d);a.currentPageCtl=Easy.DOM.getChildren(a.btns[2],"input")[0];a.totalPageCtl=Easy.DOM.getChildren(a.btns[2],"b")[0]},initEvent:function(){var a=this;Easy.each(a.btns,function(b,c){if(c==2)return Easy.CONTINUE;Easy.DOM.on(b,"click",function(){a.click.call(a,b)})});Easy.DOM.on(a.currentPageCtl,"keypress",function(c,b){b.keyCode==13&&a.jump(c.value)})},changeStatus:function(){var a=this,b=a.currentPageCtl.value;a.pageCount=Math.ceil(a.totalRecord/a.store.baseParams.limit);if(b==1){a.removeClass(a.btns[0],"enable");a.removeClass(a.btns[1],"enable");if(a.pageCount>1){a.addClass(a.btns[3],"enable");a.addClass(a.btns[4],"enable")}else{a.removeClass(a.btns[0],"enable");a.removeClass(a.btns[1],"enable")}}else if(b>1&&b<a.pageCount){a.addClass(a.btns[0],"enable");a.addClass(a.btns[1],"enable");a.addClass(a.btns[3],"enable");a.addClass(a.btns[4],"enable")}else if(b==a.pageCount){if(a.pageCount>1){a.addClass(a.btns[0],"enable");a.addClass(a.btns[1],"enable")}else{a.removeClass(a.btns[0],"enable");a.removeClass(a.btns[1],"enable")}a.removeClass(a.btns[3],"enable");a.removeClass(a.btns[4],"enable")}},jump:function(c){var a=this,b=parseInt(c);if(a.pageCount<b)alert("\u6ca1\u6709\u8be5\u9875\uff0c\u603b\u5171\u53ea\u6709"+a.pageCount+"\u9875!");else{a.store.baseParams.start=(b-1)*a.store.baseParams.limit;Easy.util.setCookie("Easy_grid_start",a.store.baseParams.start);a.store.load();a.changeStatus()}},click:function(e){var a=this,c,d=Easy.DOM.getAttribute(e,"value"),b=a.store.baseParams.limit;if(!Easy.DOM.hasClass(e,"enable")&&d!=="r")return false;if(d=="f")c=0;else if(d=="l"&&a.totalRecord>b)c=a.totalRecord-a.totalRecord%b-(a.totalRecord%b==0?b:0);else if(d=="p")c=a.store.baseParams.start-b;else if(d=="n")c=a.store.baseParams.start+b-(a.totalRecord%b==0&&a.store.baseParams.start+b==a.totalRecord?b:0);else if(d=="r"){a.store.load();return false}if(c<0||c>a.totalRecord)return;a.store.baseParams.start=c;Easy.util.setCookie("Easy_grid_start",c);a.store.load();a.changeStatus()},refresh:function(d,c){var a=this,b=a.store.baseParams;a.totalRecord=c;a.info.innerHTML=Easy.String.format(a.infoTpl,b.start+1,b.start+a.target.rows.length,c);a.currentPageCtl.value=Math.ceil(b.start/b.limit)+1;a.totalPageCtl.innerHTML=Math.ceil(c/b.limit);a.changeStatus()}});Easy.xtype.regist("pagingbar",Easy.UI.Pagingbar);Easy.UI.CheckboxModel=Easy.extend(Easy.UI.Base,{width:30,isSM:true,cls:"e-radio",multiSelect:false,constructor:function(b){var a=this;Easy.apply(a,b);a.cls=a.multiSelect?" e-checkbox":"e-radio";Easy.UI.CheckboxModel.superclass.constructor.call(this)},initComponent:function(){var a=this,b=a.wrap=a.create({tag:"td",style:{width:a.width},cls:"e-head-center",children:{tag:"span",cls:"e-grid-select-model "+a.cls,style:{width:a.width-7},html:"&#160;"}})}});Easy.xtype.regist("checkboxmodel",Easy.UI.CheckboxModel);Easy.UI.RowNumberModel=Easy.extend(Easy.UI.Base,{width:30,isNum:true,cls:"e-row-number",multiSelect:false,constructor:function(a){var b=this;Easy.apply(b,a);Easy.UI.RowNumberModel.superclass.constructor.call(this)},initComponent:function(){var a=this,b=a.wrap=a.create({tag:"td",style:{width:a.width},cls:"e-head-center",children:{tag:"span",cls:"e-grid-select-model "+a.cls,style:{width:a.width-7},html:"&#160;"}})}});Easy.xtype.regist("rownumbermodel",Easy.UI.RowNumberModel);Easy.UI.GridTree=Easy.extend(Easy.UI.Grid,{baseCls:"e-gridtree",expand:true,rowChildren:[],plugs:[],childWraps:[],treeTdIndex:0,selectLevel:0,childProp:"children",constructor:function(b){var a=this;a.rowChildren=[];a.pagingbar=null;Easy.apply(a,b);Easy.UI.GridTree.superclass.constructor.call(this)},initComponent:function(){var a=this,h=[],f=[],g=[],d=a.scrollBarWidth+3,b,c,i=function(d,j,i){if(d.wrap){c=d.wrap.firstChild;b=d.wrap;if(d.isSM&&d.multiSelect)Easy.DOM.on(b,"click",function(b){a.selectAll(b.checked=!b.checked);a[b.checked?"addClass":"removeClass"](b.firstChild,Easy.String.trim(d.cls)+"-checked")})}else{var e="e-head-center";if(j==2)e+=" noborder";c=a.create({tag:"span",cls:d.sortable?"e-sortable":"",style:{textAlign:d.align||"left",width:!Easy.isNumber(d.width)?"auto":d.width-7},html:(d.header||"&#160;")+(d.sortable?"<img src="+Easy.BLANK_IMAGE_URL+" />":"")});b=a.create({tag:"td",style:{width:d.width||"auto"},cls:e,children:c})}h.push(c);f.push(b);if(d.isTree)a.treeTdIndex=i;d.hidden&&Easy.DOM.hide(b);g.push({isSys:d.isSM?1:d.isNum?2:0,isTree:!!d.isTree,cls:d.cls,cfg:d,dom:b,textWrap:c,sortable:d.sortable,align:d.align||"left",renderer:d.renderer,field:d.field,text:d.header,width:d.width||"auto",hidden:!!d.hidden})};Easy.each(a.columns,function(b){if(Easy.isNumber(b.width)){d+=b.width;a.autoFill=a.autoFill||false}else{if(!Easy.isNumber(a.width))a.autoFill=true;d+=a.minAutoWidth}});a.width=a.width||d;Easy.each(a.columns,function(d,c){var b=c;if(c==a.columns.length-1)b=2;else b=1;i(d,b,c);a.colCount++});a.columnConfig=g;f.unshift(a.create({tag:"td",cls:"e-head-first",style:{width:a.frame?3:2},html:"<span></span>"}));var e=a.wrap=a.create({tag:"div",cls:a.baseCls,style:{width:a.width,height:a.height||"auto"}}),k=a.header=a.create({tag:"div",cls:a.baseCls+"-head-wrap"+(!a.frame?" noframe":""),children:{tag:"table",border:"0",cellpadding:"0",cellspacing:"0",children:{tag:"tbody",children:{tag:"tr",children:f}}}},e),j=a.body=a.create({tag:"div",cls:a.baseCls+"-body-wrap",children:a.table=a.create({tag:"table",border:"0",cellpadding:"0",cellspacing:"0",children:a.rowWrap=a.create({tag:"tbody"})})},e);a.createStore();if(!a.noPaging)a.pagingbar=new Easy.UI.Pagingbar(Easy.applyIf({store:a.store,renderTo:e,target:a},a.pagingConfig));else Easy.DOM.setStyle(a.body,{borderBottom:"#c7c7c7 1px solid"});a.hideHeaders&&a.hideHeader();a.renderTo&&a.render(a.renderTo);a.load()},initEvent:function(){var a=this;Easy.each(a.columnConfig,function(b,c){if(b.sortable)Easy.DOM.on(b.dom,"click",a.headerCellClick,a,[b,c])});Easy.DOM.on(window,"resize",a.onWindowResize,a)},initRowEvent:function(a,c){var b=this;Easy.DOM.on(a,"mouseover",b.rowOver,b,[a,c],false);Easy.DOM.on(a,"mouseout",b.rowOut,b,[a,c],false);Easy.DOM.on(a,"click",b.rowClick,b,[a,c,true],false);Easy.DOM.on(a,"dblclick",b.rowDblClick,b,[a,c],false)},initData:function(b,c){var a=this;a.clearRows();b!=null&&Easy.isArray(b)&&b.length!=0&&Easy.each(b,function(b,c){b.leaf=!(b[a.childProp]&&b[a.childProp].length);a.addRow(b,null,true);a.rows[c].leaf=0;if(a.primaryKey)a.data[b[a.primaryKey]]=b;else{b[a.primaryKey||a._primaryKey]=c;a.data[c]=b}if(b[a.childProp]&&b[a.childProp].length){var d=a.rows[c];a.initChild(b[a.childProp],d)}});a.pagingbar&&a.pagingbar.refresh(a,c);a.fireEvent("viewready",a)},initChild:function(g,b){var a=this,j=Easy.isNumber(b.leaf-0)?b.leaf-0:0,e=[],i=b.cells[a.treeTdIndex+1],f=a.create({tag:"tbody"}),d=a.create({tag:"table",border:"0",cellpadding:"0",cellspacing:"0",children:f});e.push(a.create({tag:"td",colspan:a.columnConfig.length+1,children:d}));var c=a.create({tag:"tr",leaf:j+1,cls:"e-grid-row e-grid-tree-child-wrap",children:e},b.parentNode);a.on("clearrow",function(){Easy.removeNode(d);Easy.removeNode(c)},a);a.rowChildren.push(d);var h=a.addPlus(Easy.DOM.getChildren(i,"span")[0],a.expand,c);a.plugs.push(h);a.childWraps.push(c);Easy.each(g,function(c,e){a.initChildRow(c,null,b,f);if(c[a.childProp]&&c[a.childProp].length){var d=b.rows[e];d.rows=d.rows||[];a.initChild(c[a.childProp],d)}})},initChildRow:function(d,e,b,m){var a=this,g=[],f=[],l=Easy.isNumber(e)?e:b.rows.length,j=Easy.isNumber(b.leaf-0)?b.leaf-0:0,i=(j+1)*16,k=function(b){var j="e-cell",c,e=!(d[a.childProp]&&d[a.childProp].length);if(b.isSys==1){c=a.create({tag:"span",cls:"e-grid-column-text "+b.cls,style:{width:b.width=="auto"?"auto":b.width-8},value:(b.renderer||a.defaultRenderer).call(a,d[a.primaryKey],d,b)});c.baseCls=b.cls;c.checked=false;f.push(c)}else if(b.isSys==2){c=a.create({tag:"span",cls:"e-grid-column-text "+b.cls,style:{width:b.width=="auto"?"auto":b.width-7},html:l+1,value:(b.renderer||a.defaultRenderer).call(a,d[a.primaryKey],d,b)});c.baseCls=b.cls;f.push(c)}else c=a.create({tag:"span",cls:"e-grid-column-text",style:{textAlign:b.align,width:!Easy.isNumber(b.width)?"auto":b.width-7-(b.isTree?i+2+(e?15:0):0),paddingLeft:b.isTree?i+(e?15:0):0},html:(b.isTree?"<img src='"+Easy.BLANK_IMAGE_URL+"' class='"+(!e?"e-grid-tree-folder":"e-grid-tree-leaf")+"' />":"")+(b.renderer||a.defaultRenderer).call(a,d[b.field],d,b)});var h=a.create({tag:"td",style:{width:!Easy.isNumber(b.width)?"auto":b.width},cls:"e-cell",children:c});b.hidden&&Easy.DOM.hide(h);!a.allowSelectText&&Easy.DOM.unUserSelect(c);g.push(h)};Easy.each(a.columnConfig,function(a){k(a,1)});g.unshift(a.create({tag:"td",cls:"e-cell-f",html:"<span>&#160;</span>"}));var c=a.create({tag:"tr",cls:"e-grid-row",children:g});c.data=d;c.sms=f;if(!Easy.isNumber(e)){m.appendChild(c);var h="e-grid-last-row";b.rows.length>0&&Easy.DOM.replaceClass(b.rows[b.rows.length-1],"e-grid-last-row","e-grid-row");if(a.stripeRows&&b.rows.length%2)h+=" e-grid-row-stripe";Easy.DOM.replaceClass(c,"e-grid-row",h);b.rows.push(c);e=b.rows.length-1}else{Easy.DOM.insertBefore(c,b.rows[e]);b.rows.splice(e-1,0,c);a.doStripeRow()}c.leaf=j+1;c.selected=false;c.parent=b;a.initRowEvent(c,e);a.fireEvent("rowadded",a)},addRow:function(b,c,j){var a=this,f=[],e=[],i=Easy.isNumber(c)?c:a.rows.length;if(a.primaryKey&&a.data[b[a.primaryKey]]){new Easy.Error("In this grid, the primary key '"+b[a.primaryKey]+"' is exist!");return false}var h=function(c){var h="e-cell",d;if(c.isSys==1){d=a.create({tag:"span",cls:"e-grid-column-text "+c.cls,style:{width:c.width=="auto"?"auto":c.width-8},value:(c.renderer||a.defaultRenderer).call(a,b[a.primaryKey],b,c)});d.baseCls=c.cls;d.checked=false;e.push(d)}else if(c.isSys==2){d=a.create({tag:"span",cls:"e-grid-column-text "+c.cls,style:{width:c.width=="auto"?"auto":c.width-7},html:i+1,value:(c.renderer||a.defaultRenderer).call(a,b[a.primaryKey],b,c)});d.baseCls=c.cls;e.push(d)}else d=a.create({tag:"span",cls:"e-grid-column-text",style:{textAlign:c.align,width:!Easy.isNumber(c.width)?"auto":c.width-7,paddingLeft:c.isTree&&!b[a.childProp]?15:0},html:(c.isTree?"<img src='"+Easy.BLANK_IMAGE_URL+"' class='"+(b[a.childProp]?"e-grid-tree-folder":"e-grid-tree-leaf")+"' />":"")+(c.renderer||a.defaultRenderer).call(a,b[c.field],b,c)});var g=a.create({tag:"td",style:{width:c.width},cls:h,children:d});f.push(g);c.hidden&&Easy.DOM.hide(g);!a.allowSelectText&&Easy.DOM.unUserSelect(g)};Easy.each(a.columnConfig,function(a){h(a,1)});f.unshift(a.create({tag:"td",cls:"e-cell-f",html:"<span>&#160;</span>"}));var d=a.create({tag:"tr",cls:"e-grid-row",children:f});d.sms=e;if(!Easy.isNumber(c)){a.rowWrap.appendChild(d);var g="e-grid-last-row";a.rows.length>0&&Easy.DOM.replaceClass(a.rows[a.rows.length-1],"e-grid-last-row","e-grid-row");if(a.stripeRows&&a.rows.length%2)g+=" e-grid-row-stripe";Easy.DOM.replaceClass(d,"e-grid-row",g);a.rows.push(d);c=a.rows.length-1}else{Easy.DOM.insertBefore(d,a.rows[c]);a.rows.splice(c-1,0,d);a.doStripeRow()}d.selected=false;d.leaf=0;d.rows=[];if(!j){var k;if(a.primaryKey)a.data[b[a.primaryKey]]=b;else{b[a.primaryKey||a._primaryKey]=c;a.data[c]=b}a.store.add(b,c);a.pagingbar&&a.pagingbar.refresh(a,a.pagingbar.totalRecord+=1)}a.initRowEvent(d,c);a.fireEvent("rowadded",a)},addPlus:function(d,b,e){var a=this,c=a.create({tag:"img",expand:b,src:Easy.BLANK_IMAGE_URL,cls:"e-grid-tree-plus"+(b?" expand":"")}),g=a.create({tag:"img",expand:b,src:Easy.BLANK_IMAGE_URL,cls:"e-grid-tree-plus"+(b?" expand":"")});!b&&Easy.DOM.hide(e);var f=Easy.DOM.getParent(d,"td");Easy.DOM.setStyle(f,{paddingLeft:Math.max(Easy.DOM.getStyle(f,"paddingLeft")-15,0)});!d.firstChild&&d.appendChild(document.createTextNode(""));Easy.DOM.insertFirst(c,d.firstChild);Easy.DOM.on(c,"mouseover",function(b){a.addClass(b,"over")});Easy.DOM.on(c,"mouseout",function(b){a.removeClass(b,"over")});Easy.DOM.on(c,"click",function(b,d){var c=Easy.decode(Easy.DOM.getAttribute(b,"expand"));if(c){Easy.DOM.hide(e);Easy.DOM.setAttribute(b,"expand",false);a.removeClass(b,"expand")}else{Easy.DOM.show(e);Easy.DOM.setAttribute(b,"expand",true);a.addClass(b,"expand")}d.stop()});return c},toggle:function(b){var a=this;a.plugs.length==a.childWraps.length&&Easy.each(a.plugs,function(c,e){var d=a.childWraps[e];if(!b){Easy.DOM.hide(d);Easy.DOM.setAttribute(c,"expand",false);a.removeClass(c,"expand")}else{Easy.DOM.show(d);Easy.DOM.setAttribute(c,"expand",true);a.addClass(c,"expand")}})},rowClick:function(a,c,e){var b=this;if(a.selected&&!b.towCilckUnSelect)return false;if(!a.selected||a.selected&&b.towCilckUnSelect){b[a.selected?"removeClass":"addClass"](a,b.baseCls+"-row-selected");Easy.each(a.sms,function(c){b[a.selected?"removeClass":"addClass"](c,Easy.String.trim(c.baseCls)+"-checked");c.checked=!a.selected});var d=b.getSelectModel();d&&!d.cfg.multiSelect&&!a.selected&&b.deselectOther(c,a.leaf,a);a.selected=!a.selected;e&&b.fireEvent("rowclick",b,a,c)}},deselectOther:function(c,d,e){var a=this,b=a.rows,g=a.getSelectModel();if(g&&!g.cfg.multiSelect)if(a.selectLevel==1&&e.parent)b=e.parent.rows;else{var f=function(b){Easy.each(b,function(b,e){if(!(e==c&&b.leaf==d)){a.removeClass(b,a.baseCls+"-row-selected");Easy.each(b.sms,function(b){a.removeClass(b,Easy.String.trim(b.baseCls)+"-checked");b.checked=false});b.selected=false}b.rows&&f(b.rows)})};f(b)}Easy.each(b,function(b,e){if(!(e==c&&b.leaf==d)){a.removeClass(b,a.baseCls+"-row-selected");Easy.each(b.sms,function(b){a.removeClass(b,Easy.String.trim(b.baseCls)+"-checked");b.checked=false});b.selected=false}})},getSelection:function(){var c=this,a=[],b;b=function(c){c.rows&&Easy.each(c.rows,function(c){c.selected&&a.push(c.data);b(c)})};Easy.each(c.rows,function(d,e){d.selected&&a.push(c.data[e]);b(d)});return a},clearRows:function(){var a=this,b=function(c){Easy.each(c,function(c,d){c.rows&&b(c.rows);Easy.DOM.on(c,"mouseover",a.rowOver,a,[c,d],false);Easy.DOM.on(c,"mouseout",a.rowOut,a,[c,d],false);Easy.DOM.on(c,"click",a.rowClick,a,[c,d],false);Easy.DOM.on(c,"dblclick",a.rowDblClick,a,[c,d],false);c.rows=null;Easy.removeNode(c)})};b(a.rows);a.rows=[];a.data={};a.fireEvent("clearrow",a)},doAutoSize:function(){var a=this,b=a.height,d=Easy.DOM.getInnerWidth(Easy.get(a.renderTo));if(a.autoFill===true&&d>a.width)a.width=d;else a.width=a.width;var c=a.width-a.scrollBarWidth;Easy.DOM.setStyle(a.body,{width:a.width-2});Easy.DOM.setStyle(a.wrap,{width:a.width});Easy.DOM.setStyle(a.header,{width:a.width-(a.frame?0:1)});a.pagingbar&&Easy.DOM.setStyle(a.pagingbar.wrap,{width:a.width});Easy.DOM.setStyle([a.table,Easy.DOM.getChildren(a.header,"table")[0]],{width:c,tableLayout:"fixed"});a.rowChildren.length>0&&Easy.DOM.setStyle(a.rowChildren,{width:c,tableLayout:"fixed"});a.autoColumnWidth();if(Easy.isNumber(b)){if(a.pagingbar)b-=32;if(!a.hideHeaders)b-=32;Easy.DOM.setStyle(a.body,{height:Math.max(0,b)})}}});Easy.xtype.regist("gridtree",Easy.UI.GridTree);Easy.UI.Panel=Easy.extend(Easy.UI.BoxContainer,{baseCls:"e-panel",closeAction:"close",bodyVAlign:"top",frame:true,border:false,defaults:{},constructor:function(a){Easy.apply(this,a);if(!this.frame||this.layer)this.boxCls=["e-clear","e-clear","e-clear","e-clear","e-normal","e-clear","e-clear","e-clear","e-clear"];Easy.UI.Panel.superclass.constructor.call(this)},initComponent:function(){var a=this;Easy.UI.Panel.superclass.initComponent.call(this);if(a.layer){a.level=a.level||Easy.WindowManage.level;Easy.WindowManage.level+=3;var d=a.create({tag:"div",cls:"e-panel-layer-wrap",style:{width:a.width+22,height:a.height+22,zIndex:a.level}},Easy.getBody());a.layerBody=a.wrap;a.wrap=d;a.closeBtn=a.create({tag:"a",href:"javascript:void(0)",cls:"e-panel-layer-close"});Easy.DOM.on(a.closeBtn,"click",function(){Easy.UI.Panel.superclass[a.closeAction].call(a)});a.header=a.create({tag:"div",cls:"e-panel-layer-title",style:{width:a.width-5,height:40,zIndex:a.level+2},children:[{tag:"span",html:a.title},a.closeBtn]},a.wrap);Easy.DOM.render(a.layerBody,a.wrap);a.create({tag:"div",cls:"e-panel-layer",style:{width:a.width+20,height:a.height+20,zIndex:a.level+1}},a.wrap);var b=10;if(a.title)b=50;Easy.DOM.setStyle(a.layerBody,{zIndex:a.level+2,marginTop:b,height:a.height+10-b});Easy.DOM.setStyle(a.body,{height:a.height+10-b});new Easy.UI.DD(a.wrap,{beforeDraging:function(){},afterDrop:function(){}},a.header);if(!a.items)if(a.page&&a.page.dom)Easy.DOM.render(Easy.get(a.page.dom),a.body);else if(a.url){var c=a.create({tag:"iframe",src:"javascript:void(0)",width:"100%",height:"100%",cls:"e-panel-layer-iframe",frameBorder:0},a.body);a.iframe=c}}else{!a.frame&&Easy.DOM.setStyle(a.body,{height:a.height});!a.frame&&a.border&&Easy.DOM.setStyle(a.body,{border:"1px solid #E4E4E4"})}},load:function(a){this.iframe.src=a},show:function(){var a=this;if(a.isRender){Easy.DOM.show(a.wrap);a.mask&&a.mask.show()}else a.render.call(a);a.center();a.wrap.style.zIndex=a.level;a.fireEvent("show",a);a.url&&a.load(a.url);return a},center:function(){var a=this,c=Easy.getSize(),b=Math.max((c.height-(a.height=="auto"?a.wrap.offsetHeight:a.height))/2,10);if(a.buttons)b-=32;Easy.DOM.setStyle(a.wrap,{left:(c.width-a.width)/2,top:b});a.wrap.style.zIndex=a.level},valid:function(){var a=this,c=true,b=[];a.itemsCmp&&Easy.each(a.itemsCmp,function(a){if(a.validValue){a.validValue();if(!a.isValid){c=false;b.push(a.verifyText)}}});a.error=b.join("<br/>");return c},submit:function(b,d){var a=this,c=a.getValues();b=b||{};if(c){c=Easy.apply(c,b.params||{});Easy.Object.remove(b,"params");Easy.Ajax.request(Easy.apply({method:a.method,url:a.url,params:c,success:a.success,failure:a.failure},b))}else{Easy.Message.alert("\u8bf7\u6839\u636e\u63d0\u793a\u586b\u5199\u8868\u5355\u6570\u636e\u7684\u5b8c\u6574\u6027\uff01",null,function(){Easy.isFunction(d)&&d()});return false}},upload:function(b){var a=this,c={};if(a.valid())Easy.Ajax.upload(Easy.apply({method:"post",url:a.url,form:a.wrap,success:a.success,failure:a.failure},b||{}));else{Easy.Message.alert("\u8bf7\u6839\u636e\u63d0\u793a\u586b\u5199\u8868\u5355\u6570\u636e\u7684\u5b8c\u6574\u6027\uff01");return false}},getValues:function(){var b=this,a={};if(b.itemsCmp&&b.valid()){Easy.each(b.itemsCmp,function(b){if(b.getValues)Easy.apply(a,Easy.value(b.getValues()));else if(b.getValue)if(b.hiddenName){a[b.hiddenName]=Easy.value(b.getValue());if(b.getText)a[b.name]=Easy.value(b.getText())}else a[b.name]=Easy.value(b.getValue())});return a}else return false},setValues:function(a){var b=this;Easy.isObject(a)&&Easy.each(b.itemsCmp,function(b){if(b.setValues)b.setValues(a);else if(b.setValue&&b.name)if(b.hiddenName)b.setValue(Easy.value(a[b.hiddenName]),Easy.value(a[b.name]));else b.setValue(Easy.value(a[b.name]))});b.fireEvent("setValues",b,a)},reset:function(){var a=this;a.itemsCmp&&Easy.each(a.itemsCmp,function(a){a.reset&&a.reset()});a.fireEvent("reset",a)},loadRecord:function(b){var a=this;Easy.Ajax.request({method:a.method,url:b.url||a.url,params:b.params||a.params,success:function(c){var b=Easy.decode(c);a.setValues(b);a.fireEvent("loadRecord",a,b)},failure:a.failure})}});Easy.xtype.regist("panel",Easy.UI.Panel);Easy.UI.Form.Panel=Easy.extend(Easy.UI.Panel,{baseCls:"e-form",isUpload:false,url:null,frame:false,border:false,method:"post",error:null,constructor:function(a){Easy.apply(this,a);this.url=a.url||a.action;Easy.UI.Form.Panel.superclass.constructor.call(this)},initComponent:function(){var a=this,b=a.wrap=a.itemWrap=Easy.DOM.create({tag:"form",id:a.id},a.renderTo?Easy.DOM.get(a.renderTo):null)},success:Easy.emptyFn,failure:Easy.emptyFn});Easy.xtype.regist("form",Easy.UI.Form.Panel);Easy.UI.List=Easy.extend(Easy.UI.Base,{width:200,column:1,itemHeight:20,width:"auto",baseCls:"e-list",selectModel:"single",itemCtls:[],constructor:function(a){Easy.apply(this,a);Easy.UI.List.superclass.constructor.call(this)},initComponent:function(){var a=this;a.wrap=a.create({tag:"div",cls:a.baseCls,style:{width:a.width}},this.renderTo?Easy.DOM.get(this.renderTo):null);a.initItem.call(a)},initItem:function(){var a=this;if(a.items)a.itemCtls.push(a.createItem.call(a,a.wrap,a.items));else if(a.columns)if(Easy.isArray(a.columns)){var b=a.width/2;Easy.each(a.columns,function(c){var d=a.create({tag:"div",cls:"e-list-column",style:{width:c.width||b}},a.wrap);a.itemCtls.push(a.createItem.call(d,c.items))})}},createItem:function(e,c){var a=this,d=[],b;c&&Easy.each(c,function(c,f){d.push(b=a.create({tag:"a",href:"#",style:{width:a.width},value:c.id,index:f,children:{tag:"b",html:c.text}},e));a.fireEvent("renderItem",a,b,a.items);Easy.DOM.on(b,"click",a.itemClick,a)});return d},initEvent:function(){var a=this},render:function(b){var a=this;Easy.DOM.render(a.wrap,Easy.DOM.get(b));a.fireEvent("render",a)},onRender:function(){},itemClick:function(a){var b=this;alert(b.selectModel+"  "+Easy.DOM.getAttribute(a,"value"))},show:function(){}});Easy.UI.Mask=Easy.extend(Easy.UI.BoxContainer,{baseCls:"e-mask",opacity:.2,level:1e3,constructor:function(a){Easy.apply(this,a);this.itemsCmp=[];Easy.UI.Mask.superclass.constructor.call(this)},initComponent:function(){var a=this,b=a.el||Easy.getBody(),e=Easy.DOM.getSize(b),c=b===Easy.getBody()?Easy.getScroll():{x:0,y:0};a.el=b;var g=Easy.DOM.getPosition(b),f={width:Easy.DOM.getWidth(b),height:Easy.DOM.getHeight(b)};c.y+=g.y;c.x+=g.x;Easy.UI.Mask.superclass.initComponent.call(a);var d=b;while(true)if(d!==Easy.getBody()&&d.style.position!="absolute"){c.y=3;c.x=3;break}else d=d.parentNode;a.mak=a.create({tag:"div",cls:a.baseCls+"-mask",style:{width:e.width,height:e.height,position:"absolute",top:Math.max(c.y-3,1),left:c.x-3}},b);b.mask=a;if(Easy.isIE6||Easy.isIE7){a.iframe=a.create({tag:"iframe",src:"about:blank",width:"100%",height:"100%",frameBorder:0},a.mak);Easy.DOM.setOpacity(a.iframe,a.opacity)}Easy.DOM.setOpacity(a.mak,a.opacity);a.message=a.text||a.message;if(a.message){var h=a.create({html:a.message,tag:"span"});a.updateText=function(a){h.innerHTML=a};a.msgWrap=a.create({tag:"div",cls:a.baseCls+"-text-wrap",children:[{tag:"span",cls:"e-mask-border-left",html:"<img src="+Easy.BLANK_IMAGE_URL+' class="e-mask-loading" />'},h]},a.body);a.fireEvent("resize",a)}Easy.DOM.setStyle(a.mak,{zIndex:a.level});Easy.DOM.setStyle(a.wrap,{zIndex:a.level+1,top:+3+f.height/2,left:c.x-3+f.width/2-Easy.UI.TextWidth(a.message,null,a.baseCls)+35});a.hideMsg&&Easy.DOM.hide(a.wrap);a.wrapScrollStatu=Easy.DOM.getStyle(b,"overflow");Easy.DOM.setStyle(b,{overflow:"hidden"});Easy.DOM.on(window,"resize",a.onResize,a)},onResize:function(){var a=this,c=Easy.DOM.getSize(a.el),e=Easy.getScroll(),f=a.el.tagName.toLowerCase()=="body",b=Easy.DOM.getPosition(a.el),d=a.el;while(true)if(d!==Easy.getBody()&&d.style.position!="absolute"){b.y=0;b.x=0;break}else d=d.parentNode;Easy.DOM.setStyle(a.wrap,{position:"absolute",top:Math.max(b.y+c.height/2-30,1),left:c.width/2-30,width:Easy.UI.TextWidth(a.message,null,a.baseCls)+65,height:30});Easy.DOM.setStyle(a.mak,{width:c.width+(f?e.x:0),height:c.height+(f?e.y:0),top:Math.max(b.y,1),left:b.x});return true},close:function(){var a=this;if(a.el){Easy.DOM.setStyle(a.el,{overflow:a.wrapScrollStatu||"auto"});Easy.Object.remove(a.el,"mask")}Easy.removeNode(a.mak);Easy.UI.Mask.superclass.close.call(this)},hide:function(){var a=this;Easy.DOM.setStyle(a.mak,{display:"none"});if(a.el){Easy.DOM.setStyle(a.el,{overflow:a.wrapScrollStatu||"auto"});Easy.Object.remove(a.el,"mask")}Easy.UI.Mask.superclass.hide.call(this)},show:function(){var a=this;!a.isRender&&a.render(Easy.get(a.el));a.isRender=true;Easy.DOM.setStyle(a.mak,{display:"block"});a.fireEvent("show",a)}});Easy.xtype.regist("mask",Easy.UI.Mask);Easy.UI.Tooltip=Easy.extend(Easy.UI.BoxContainer,{height:"auto",width:"auto",baseCls:"e-tip",mouseEvent:false,hasDiv:true,isRender:false,boxCls:["e-tip-tl","e-tip-tc","e-tip-tr","e-tip-cl","e-tip-cc","e-tip-cr","e-tip-bl","e-tip-bc","e-tip-br"],constructor:function(a){Easy.apply(this,a);this.renderTo=a.renderTo||Easy.getBody();Easy.UI.Tooltip.superclass.constructor.call(this)},initComponent:function(){var a=this;a.txtWrap=a.create({tag:"div",html:a.text||a.html});a.pointer=a.create({tag:"div",cls:"e-tip-point",html:"&#160;"});Easy.UI.Tooltip.superclass.initComponent.call(a);var b={width:"auto",height:"auto"};if(a.width!="auto")b.width=a.width-16;if(a.height!="auto")b.height=a.height-16;Easy.DOM.setStyle(a.txtWrap,b)},initEvent:function(){var a=this,b=false;Easy.UI.Tooltip.superclass.initEvent.call(a)},setText:function(a){var b=this;b.txtWrap.innerHTML=a},show:function(d,c){var a=this;if(a.isRender===false){a.render(a.renderTo);a.isRender=true}var e=Easy.getScroll(),b=Easy.DOM.getPosition(d);b.x+=Easy.DOM.getWidth(d);b.y-=10;if(c){b.x+=c.x||0;b.y+=c.y||0}Easy.DOM.setXY(a.wrap,b)},onClose:function(){var a=this;Easy.removeNode(a.txtWrap);Easy.removeNode(a.pointer)},onRender:function(){var a=this;a.body.appendChild(a.txtWrap);a.wrap.appendChild(a.pointer);a.isRender=true;Easy.DOM.setStyle(a.pointer,{width:10,top:20,left:1});return true}});Easy.xtype.regist("tip",Easy.UI.Tooltip);Easy.Window=Easy.extend(Easy.UI.Base,{height:"auto",width:300,minWidth:150,minHeight:100,maxWidth:1e4,maxHeight:1e4,offsetWidth:8,offsetHeight:37,footHeight:38,baseCls:"e-window",buttonAlign:"right",isRender:false,closeAction:"close",tools:{},bodyStyle:{},draggable:true,resizable:true,modal:false,constructor:function(a){Easy.apply(this,a);this.itemsCmp=[];Easy.Window.superclass.constructor.call(this)},initComponent:function(){var a=this,g=a.wrapHeight=Easy.isDefined(a.height)&&a.height!=="auto"?Easy.Number.parse(a.height)-a.offsetHeight:"auto",j=Easy.isDefined(a.width)&&a.width!=="auto"?Easy.Number.parse(a.width)-a.offsetWidth:"auto",i=g;if(a.buttons)g-=a.footHeight;a.url=a.url||a.loader;a.tools.closeBtn=a.create({tag:"img",cls:"e-window-close",src:a.BLANK_IMAGE_URL});a.tools.maxBtn=a.create({tag:"img",cls:"e-window-maximize",src:a.BLANK_IMAGE_URL});a.tools.minBtn=a.create({tag:"img",cls:"e-window-minimize",src:a.BLANK_IMAGE_URL});var h=[a.tools.closeBtn];if(a.maxable)h=[a.tools.maxBtn,a.tools.closeBtn];if(a.minable)h=[a.tools.minBtn,a.tools.maxBtn,a.tools.closeBtn];a.titleDOM=a.create({tag:"div",cls:"e-window-title"+(a.iconCls?" e-icon "+a.iconCls:""),html:a.title||"&#160;"});if(a.bodyStyle){j-=(a.bodyStyle.padding||0)*2+(a.bodyStyle.margin||0)*2+(a.bodyStyle.paddingLeft||0)+(a.bodyStyle.marginLeft||0)+(a.bodyStyle.paddingRight||0)+(a.bodyStyle.marginRight||0);i-=(a.bodyStyle.padding||0)*2+(a.bodyStyle.margin||0)*2+(a.bodyStyle.paddingTop||0)+(a.bodyStyle.marginTop||0)+(a.bodyStyle.paddingBottom||0)+(a.bodyStyle.marginBottom||0)}var l=a.header=a.create({tag:"td",cls:"e-window-tc e-window-move",children:[{tag:"em",cls:"e-tool",children:h},a.titleDOM]}),e=a.body=a.create(Easy.apply({tag:"div",cls:"e-window-body",style:Easy.apply({width:j,height:i},a.bodyStyle)},function(){if(!a.url)return a.contentEl?{children:Easy.DOM.setAttributes(Easy.DOM.get(a.contentEl),{style:{display:"block"},cls:"e-window-content-dom"})}:{html:a.html||""}})),k=a.footer=a.create({tag:"div",cls:"e-window-footer"}),n=a.topbar=a.create({tag:"div",cls:"e-window-topbar"});if(a.url){var m=a.create({tag:"iframe",src:"javascript:void(0)",width:"100%",height:"100%",frameBorder:0},e);a.iframe=m}if(a.autoScroll)Easy.DOM.setStyle(e,{overflow:"scroll"});else Easy.DOM.setStyle(e,{overflow:"hidden"});var f=function(b,c){var e=b.cls||"";b.cls=e+(c?" e-resize-"+c:"");var d=a.create(b);return d},c={tag:"td",cls:"e-window-cr",html:"&#160;"},b={tag:"td",cls:"e-window-bc",html:"&#160;"},d={tag:"td",cls:"e-window-br",html:"&#160;"};if(a.resizable){c=f(c,"x");b=f(b,"y");d=f(d,"xy");a.resizEl={x:c,y:b,xy:d}}a.table=a.create({tag:"table",cls:a.baseCls+"-wrap",style:{width:a.width,height:g},children:{tag:"tbody",children:[{tag:"tr",children:[{tag:"td",cls:"e-window-tl",html:"&#160;"},l,{tag:"td",cls:"e-window-tr",html:"&#160;"}]},{tag:"tr",children:[{tag:"td",cls:"e-window-cl"},{tag:"td",cls:"e-window-cc",valign:"top",children:[n,e,k]},c]},{tag:"tr",children:[{tag:"td",cls:"e-window-bl"},b,d]}]}});if(!a.level){a.level=Easy.WindowManage.level;Easy.WindowManage.level+=3}a.wrap=a.create({tag:"div",cls:a.baseCls,id:a.id,style:{"z-index":a.level},children:[a.table]});a.initButtons.call(a);a.initBar.call(a);Easy.WindowManage[a.id]=a},initEvent:function(){var a=this;Easy.DOM.on(a.tools.closeBtn,"mouseover",a.toggleClass,a.tools.closeBtn,["e-window-close-over"],false);Easy.DOM.on(a.tools.closeBtn,"mouseout",a.toggleClass,a.tools.closeBtn,["e-window-close-over"],false);Easy.DOM.on(a.tools.closeBtn,"click",a.closeClick,a);Easy.DOM.on(a.tools.maxBtn,"mouseover",a.toggleOverClass,a.tools.maxBtn);Easy.DOM.on(a.tools.maxBtn,"mouseout",a.toggleOverClass,a.tools.maxBtn);Easy.DOM.on(a.tools.maxBtn,"click",a.maxClick,a);Easy.DOM.on(a.tools.minBtn,"mouseover",a.toggleClass,a.tools.minBtn,["e-window-minimize-over"],false);Easy.DOM.on(a.tools.minBtn,"mouseout",a.toggleClass,a.tools.minBtn,["e-window-minimize-over"],false);Easy.DOM.on(a.tools.minBtn,"click",a.minClick,a);if(a.maxable)Easy.DOM.on(a.header,"dblclick",a.maxClick,a,[true],false);Easy.DOM.on(window,"resize",a.onWindowResize,a,[[a.width,a.height]])},initItem:function(){var a=this,d=[];if(Easy.isArray(a.items))Easy.each(a.items,function(b){var c={};Easy.applyIf(b,a.defaults);if(b.isEasyCmp){c=b;b.render(a.body)}else if(b.xtype)c=new Easy.xtype[b.xtype](Easy.applyIf(b,{renderTo:a.body}));else c.wrap=a.create(b,a.body);c.ownerCt=a;a.itemsCmp.push(c)});else if(Easy.isObject(a.items)){var c={},b=a.items;Easy.applyIf(b,a.defaults);if(b.isEasyCmp){c=b;b.render(a.body)}else if(b.xtype)c=new Easy.xtype[b.xtype](Easy.applyIf(b,{renderTo:a.body}));else c.wrap=a.create(b,a.body);c.ownerCt=a;a.itemsCmp.push(c)}a.fireEvent("renderitem",a)},initBar:function(){var a=this,b=a.tbar;if(!b){Easy.DOM.setStyle(a.topbar,{visibility:"hidden",display:"none"});return}if(Easy.isArray(b))a.tbar=new Easy.UI.Toolbar({items:b,renderTo:a.topbar});else if(Easy.isObject(b))if(b.wrap)b.render(a.topbar);else a.tbar=new Easy.UI.Toolbar({items:b,renderTo:a.topbar});Easy.DOM.setStyle(a.topbar,{visibility:"visible",display:"block"})},initButtons:function(){var a=this,b=a.buttons;a.buttons=[];var c=function(c){var b=new Easy.SimpleButton(c);b.render(a.footer);a.buttons.push(b);b.ownerCt=a};if(b){if(Easy.isObject(b))c(b);else Easy.isArray(b)&&Easy.each(b,function(a){c(a)});Easy.DOM.setStyle(a.footer,{padding:"5px 15px","text-align":a.buttonAlign,visibility:"visible"})}else Easy.DOM.setStyle(a.footer,{visibility:"hidden"});return a},document:function(){var a=this;return a.iframe?a.iframe.contentWindow.document||a.iframe.contentDocument||window.frames[a.id+"_body_iframe"].document:null},getInIframe:function(c){var b=this;if(b.iframe){var a=null;return(a=b.document())?a.getElementById(c):null}else return null},getItem:function(a){return this.itemsCmp[a]},addButton:function(b,c){var a=this,d=function(d){var b=new Easy.Button(d);if(Easy.isDefined(c)&&c<a.buttons.length)Easy.DOM.insertBefore(b.wrap,a.buttons[c].wrap);else b.render(a.footer);b.ownerCt=a;a.buttons.push(b)};if(Easy.isObject(b))d(b);else Easy.isArray(b)&&Easy.each(b,function(a){d(a)})},removeButton:function(a){var b=this,c=Easy.isString(a)?a:a.id;Easy.each(b.buttons,function(a,d){if(a.id==c){a.destroy();b.buttons.splice(d,1)}})},render:function(){var a=this;if(!a.isRender){Easy.DOM.render(a.wrap,Easy.getBody());a.isRender=true}if(a.draggable){var b;new Easy.DD(a.wrap,{beforeDraging:function(){if(a.iframe){b=new Easy.UI.Mask({opacity:0,el:a.body});b.show()}},afterDrop:function(){b&&b.close()}},a.header)}if(a.resizable){var c,d=function(b,d){new Easy.Resize(a.wrap,{position:d,scope:a,otherDom:[a.table,{width:0,height:-41},a.body,{height:-75,width:-12}],beforeResize:function(){if(a.iframe){c=new Easy.UI.Mask({opacity:0,el:a.body});c.show()}},afterResize:function(){c&&c.close()}},b)};Easy.each(a.resizEl,function(b,c){d.call(a,b,c)});Easy.destroy(a.resizEl)}if(a.modal)a.mask=new Easy.UI.Mask({hideMsg:true,level:a.level-1});a.fireEvent("render",a)},load:function(b){var a=this;a.fireEvent("beforeload",a);if(a.iframe){a.iframe.src=b;a.fireEvent("load",a.iframe.contentWindow||a.iframe||window.frames[a.iframe.id])}},maxClick:function(c){var a=this;if(a.maximized){Easy.DOM.setStyle(a.wrap,{width:a.old.width,heihgt:a.old.height,left:a.old.x,top:a.old.y});a.fireEvent("resize",a,[a.old.width,a.old.height],a.maximized);Easy.DOM.removeClass(a.tools.maxBtn,"e-window-restore-over");Easy.DOM.removeClass(a.tools.maxBtn,"e-window-restore");Easy.DOM.addClass(a.tools.maxBtn,"e-window-maximize"+(Easy.isObject(c)?"-over":""))}else{var b=Easy.getSize();a.old={width:a.width,height:a.height,x:a.wrap.style.pixelLeft,y:a.wrap.style.pixelTop};Easy.DOM.setStyle(a.wrap,{width:b.width,heihgt:b.height,left:-1,top:-2});a.fireEvent("resize",a,[b.width,b.height],a.maximized);Easy.DOM.addClass(a.tools.maxBtn,"e-window-restore"+(Easy.isObject(c)?"-over":""));Easy.DOM.removeClass(a.tools.maxBtn,"e-window-maximize");Easy.DOM.removeClass(a.tools.maxBtn,"e-window-maximize-over")}a.maximized=!a.maximized},minClick:function(){},hide:function(){this.mask&&this.mask.hide();Easy.Window.superclass.hide.call(this)},close:function(){this.mask&&this.mask.close();Easy.Window.superclass.close.call(this)},show:function(){var a=this;if(a.isRender){Easy.DOM.show(a.wrap);a.mask&&a.mask.show()}else a.render.call(a);a.center();a.wrap.style.zIndex=a.level;a.fireEvent("show",a);a.url&&a.load(a.url);return a},center:function(){var a=this,c=Easy.getSize(),b=Math.max((c.height-(a.height=="auto"?a.wrap.offsetHeight:a.height))/2,10),d=Easy.getScroll();if(a.buttons)b-=32;Easy.DOM.setStyle(a.wrap,{left:Math.max((c.width-a.width)/2,1),top:Math.max(b+d.y,1)});a.wrap.style.zIndex=a.level},closeClick:function(){this[this.closeAction].apply(this,arguments)},onRender:function(){var a=this;a.fireEvent("resize",a,[a.width,a.height])},onResize:function(b){var a=this;a.width=b[0];a.height=b[1];a.wrapHeight=a.height-a.offsetHeight;if(a.buttons)a.wrapHeight-=a.footHeight;Easy.DOM.setStyle(a.table,{height:a.wrapHeight,width:a.width});var c=a.width-a.offsetWidth;if(a.bodyStyle){c-=(a.bodyStyle.padding||0)*2+(a.bodyStyle.margin||0)*2+(a.bodyStyle.paddingLeft||0)+(a.bodyStyle.marginLeft||0)+(a.bodyStyle.paddingRight||0)+(a.bodyStyle.marginRight||0);a.wrapHeight-=(a.bodyStyle.padding||0)*2+(a.bodyStyle.margin||0)*2+(a.bodyStyle.paddingTop||0)+(a.bodyStyle.marginTop||0)+(a.bodyStyle.paddingBottom||0)+(a.bodyStyle.marginBottom||0)}Easy.DOM.setStyle(a.body,{height:a.wrapHeight,width:c});if(a.layout=="fit"){var d=a.itemsCmp[0];d.doAutoSize&&d.doAutoSize(a.width-a.offsetWidth-2,a.wrapHeight)}},onWindowResize:function(){var a=this,b=[a.width,a.height];if(a.maximized)b=Easy.getSize();a.fireEvent("resize",a,b);a.center()},toggleOverClass:function(b){var a=b.className;if(a.indexOf("-over")>-1)b.className=a.replace("-over","");else b.className=a+"-over"},setTitle:function(a){this.titleDOM.innerHTML=a},setIconCls:function(a){Easy.DOM.addClass(this.titleDOM,a)}});Easy.xtype.regist("window",Easy.Window);Easy.WindowManage={level:2e4};Easy.Message=function(a){return{alert:function(d,f,e){var b=Easy.UI.TextWidth(d)+80;b=b>500?500:b;var c=new a.Window({title:f||"\u63d0\u793a",html:Easy.String.format("<div class='e-msg-alert-info'>{0}</div>",d),height:150,width:b,level:999999999,modal:true,buttonAlign:"center",resizable:false,iconCls:"e-msg-alert",buttons:[{text:"\u786e\u5b9a",handler:function(){Easy.isFunction(e)&&e();c.close()}}]});c.show();return c},confirm:function(e,g,f,d){var c=Easy.UI.TextWidth(e)+80;c=c>500?500:c;var b=new a.Window({title:g||"\u786e\u8ba4",html:Easy.String.format("<div class='e-msg-confirm-info'>{0}</div>",e),height:150,width:c,level:999999999,modal:true,resizable:false,buttonAlign:"center",iconCls:"e-msg-confirm",buttons:[{text:"\u786e\u5b9a",handler:function(){Easy.isFunction(f)&&f("yes");b.close()}},{text:"\u53d6\u6d88",handler:function(){Easy.isFunction(d)&&d();b.close()}}]});b.show();return b},prompt:function(f,e,c){var g=320,d="idprompt_"+Math.random(1e3),b=new a.Window({title:e||"\u8f93\u5165",html:Easy.String.format("<div class='e-msg-prompt-info'>{0}<br/><input type='text' id='{1}' /></div>",f,d),height:150,width:g,level:999999999,modal:true,buttonAlign:"center",resizable:false,iconCls:"e-msg-prompt",buttons:[{text:"\u786e\u5b9a",handler:function(){Easy.isFunction(c)&&c("yes",a.get(d).value);b.close()}},{text:"\u53d6\u6d88",handler:function(){b.close()}}]});b.show();return b},wait:function(g,f){var d=350,e="idwait_"+Math.random(1e3),c=new a.Window({title:f||"\u7b49\u5f85",html:Easy.String.format("<div class='e-msg-wait-info'>{0}<br/><div class='e-msg-wait-bar-wrap' style='width:{2}px;'><div class='e-msg-wait-bar' id='{1}'></div></div></div>",g,e,d-30),height:150,width:d,level:999999999,resizable:false,modal:true,buttonAlign:"center",resizable:false,iconCls:"e-msg-wait",buttons:[{text:"\u786e\u5b9a",handler:function(){c.close()}}]});c.show();var b=Easy.get(e);new Easy.Timer(function(){var a=b.offsetWidth;if(a>=d-40)b.style.width=0;else b.style.width=b.offsetWidth+2},100);return c},process:function(k,g,h,j){var c=350,f="idprocess_"+Math.random(1e3),b={value:h},e=new a.Window({title:j||"\u7b49\u5f85",html:Easy.String.format("<div class='e-msg-process-info'>{0}<br/><div class='e-msg-process-bar-wrap' style='width:{2}px;'><div class='e-msg-process-text' id='{1}_text'>{3}</div><div class='e-msg-process-bar' id='{1}'></div></div></div>",k,f,c-30,g),height:150,resizable:false,width:c,level:999999999,modal:true,buttonAlign:"center",iconCls:"e-msg-wait"});e.show();b.close=Easy.delegate(e.close,e);var d=Easy.get(f),i=Easy.get(f+"_text");b.update=function(a,b){if(a>0&&a<1)d.style.width=(c-30)*a+"px";else if(a<=0)d.style.width="0px";else if(a>=1)d.style.width=c-30+"px";i.innerHTML=b;i.textContent=b};b.update(h,g);return b}}}(Easy);Easy.define("Easy.UI.Menu");Easy.UI.Menu.Item=Easy.extend(Easy.UI.Base,{width:230,iconColor:null,baseCls:"e-menu-item",constructor:function(a){var b=this;Easy.apply(b,a);Easy.UI.Menu.Item.superclass.constructor.call(this)},initComponent:function(){var a=this,b=Easy.DOM,c=a.iconCtl=b.create({tag:"img",cls:"e-icon "+a.iconCls,src:Easy.BLANK_IMAGE_URL}),d=a.txtCtl=b.create({tag:"span",cls:"e-menu-item-text",html:a.text}),e=a.wrap=b.create({tag:"li",cls:a.baseCls+(a.cls?" "+a.cls:""),children:{tag:"a",href:"#",children:[c,d]}});if(a.iconColor)c.style.backgroundColor=a.iconColor},initEvent:function(){var a=this,b=Easy.DOM;b.on(a.wrap,"mouseover",function(){b.addClass(a.wrap,a.baseCls+"-active")});b.on(a.wrap,"mouseout",function(){b.removeClass(a.wrap,a.baseCls+"-active")});b.on(a.wrap,"click",Easy.delegate(a.handler||Easy.emptyFn,a))},setText:function(a){this.txtCtl.innerHTML=a},setIconCls:function(a){Easy.DOM.addClass(this.iconCtl,a)}});Easy.xtype.regist("menuitem",Easy.UI.Menu.Item);Easy.UI.Menu.Panel=Easy.extend(Easy.UI.Base,{width:230,height:25,sptHeight:0,baseCls:"e-menu",itemsCmp:[],isRender:false,closeAction:"destroy",constructor:function(b){var a=this;Easy.apply(a,b);a.itemsCmp.length=0;Easy.UI.Menu.Panel.superclass.constructor.call(this)},initComponent:function(){var a=this,b=a.initItem.call(a);b.push({tag:"div",cls:"e-clear"});var c=a.list=Easy.DOM.create({tag:"ul",cls:"e-menu-list",children:b});a.wrap=Easy.DOM.create({tag:"div",cls:a.baseCls,style:{width:a.width,height:a.height},children:c})},initEvent:function(){var a=this},initItem:function(){var b=this,a=[];Easy.each(b.items,function(c){if(c=="-"){a.push((new Easy.UI.Menu.Separator).wrap);b.sptHeight+=7;return}var d=new Easy.UI.Menu.Item(c);b.itemsCmp.push(d);a.push(d.wrap)});return a},onShow:function(){},destroy:function(){Easy.removeNode(this.wrap);this.itemsCmp.length=0;this.isRender=false},hide:function(){var a=this;Easy.DOM.setStyle(a.wrap,{display:"none"});Easy.DOM.un(Easy.getBody(),"click",Easy.delegate(a.hide,a));this.fireEvent("hide",this)},doAutoSize:function(){var b=this,a={width:b.list.clientWidth,height:b.list.offsetHeight};if(a.width<120){a.width=120;Easy.DOM.setStyle(b.list,{width:120})}Easy.DOM.setStyle(b.wrap,{width:a.width+2,height:a.height+2})},onRender:function(){this.doAutoSize()},show:function(c,b){var a=this;Easy.DOM.setStyle(a.wrap,{display:"block",position:"absolute"});if(a.isRender)Easy.DOM.setXY(a.wrap,{x:b.clientX,y:b.clientY});else{var c=c?Easy.get(c):Easy.getBody();if(b)if(Easy.isEvent(b))Easy.DOM.render(a.wrap,c,"cc",{x:b.clientX,y:b.clientY});else Easy.DOM.render(a.wrap,c,"cc");else Easy.DOM.render(a.wrap,c,"cc");a.isRender=true;a.fireEvent("render",a);Easy.DOM.on(Easy.getDoc(),"click",a[a.closeAction],a)}a.fireEvent("show",a)}});Easy.xtype.regist("menu",Easy.UI.Menu.Panel);Easy.UI.Menu.Separator=Easy.extend(Easy.UI.Base,{width:230,baseCls:"e-menu-separator",constructor:function(a){var b=this;Easy.apply(b,a);Easy.UI.Menu.Separator.superclass.constructor.call(this)},initComponent:function(){var a=this,b=Easy.DOM,c=a.wrap=b.create({tag:"li",cls:a.baseCls+(a.cls?" "+a.cls:""),children:{tag:"a",href:"#"}})}});Easy.xtype.regist("menuseparator",Easy.UI.Menu.Separator);Easy.UI.Toolbar=Easy.extend(Easy.UI.Base,{height:40,width:"auto",baseCls:"e-toolbar",buttonsAlign:"left",buttons:[],itemsCmp:[],constructor:function(b){var a=this;Easy.apply(a,b);a.itemsCmp.length=0;Easy.UI.Toolbar.superclass.constructor.call(this)},initComponent:function(){var a=this,b=0;a.body=a.create({tag:"div",cls:a.bodyCls||""});a.wrap=a.create({tag:"div",cls:a.baseCls+" "+a.cls,style:{width:a.width,height:a.height},children:[a.body,{tag:"div",cls:"e-clear"}]});a.render();Easy.isArray(a.items)&&Easy.each(a.items,function(d){var c;if(d=="-"){var e=a.create({tag:"div",cls:"e-toolbar-separator",style:{"float":"left"},html:"&#160;"});b+=5;Easy.DOM.render(e,a.body)}else if(!d.tag&&d.text){if(d.xtype)c=new Easy.xtype[d.xtype](Easy.applyIf(d,a.defaults));else c=new Easy.Button(d);c.ownerCt=a;c.render(a.body);Easy.DOM.setStyle(c.wrap,{"float":"left"});a.buttons.push(c);if(c.wrap.style.display!="none")b+=c.width+Easy.DOM.getStyle(c.wrap,"marginLeft")+Easy.DOM.getStyle(c.wrap,"marginRight")+Easy.DOM.getStyle(c.wrap,"paddingLeft")+Easy.DOM.getStyle(c.wrap,"paddingRight")}else{c=Easy.DOM.create(d);Easy.DOM.setStyle(c,{"float":"left"});Easy.DOM.render(c,a.body);if(c.style.display!="none")b+=Easy.DOM.getWidth(c)}a.itemsCmp.push(c)});if(a.buttonsAlign=="center")Easy.DOM.setStyle(a.body,{width:b+20,margin:"0 auto"});else Easy.DOM.setStyle(a.body,{width:b+20,"float":a.buttonsAlign})},initEvent:function(){var a=this},render:function(){var a=this;Easy.DOM.render(a.wrap,Easy.get(a.renderTo));a.fireEvent("render",a)}});Easy.xtype.regist("toolbar",Easy.UI.Toolbar);Easy.UI.TabPanel=Easy.extend(Easy.UI.Base,{height:24,width:"auto",baseCls:"e-tab",headers:[],bodys:[],constructor:function(a){Easy.apply(this,a);this.headers.length=0;this.bodys.length=0;Easy.UI.TabPanel.superclass.constructor.call(this)},initComponent:function(){var a=this,b,c;a.wrap=a.create({tag:"div",cls:a.baseCls,style:{width:a.width},children:[b=a.create({tag:"div",cls:"e-tab-strip-wrap"}),c=a.create({tag:"div",cls:"e-tab-body-wrap"})]},this.renderTo?Easy.DOM.get(this.renderTo):null);Easy.isArray(a.items)&&Easy.each(a.items,function(d,j){var g=[],k=0;if(d.iconCls||d.icon||d.iocnColor){var i=a.create({tag:"img",src:d.icon||Easy.BLANK_IMAGE_URL,cls:"e-icon"+(d.iconCls?" "+d.iconCls:"")});d.iconColor&&Easy.isColor(d.iconColor)&&Easy.DOM.setStyle(i,{"background-color":d.iconColor});g.push(i);k+=25}g.push(a.create({tag:"span",html:d.title}));var f=a.create({tag:"a",id:"tabstrip_"+Easy.guid++,cls:"e-tab-strip",href:"javascript:void(0)",children:g},b);a.headers.push(f);var e=d.wrap=a.create({tag:"div",cls:"e-tab-body"},c),h=null;d.itemsCmp=[];if(d.el){h=Easy.get(d.el);Easy.DOM.render(h,e)}else a._initItem(d,e,d.items);a.itemsCmp.push(d);a.bodys.push(e);if(j==0){Easy.DOM.show(e);Easy.DOM.addClass(f,"e-tab-strip-active")}else Easy.DOM.hide(e);Easy.DOM.on(f,"click",function(){a.togglePanel.call(a,j,f)})})},_initItem:function(b,c,a){var e=b;if(Easy.isArray(a))Easy.each(a,function(a){var d={};Easy.applyIf(a,b.defaults);if(a.isEasyCmp){d=a;a.render(c)}else if(a.xtype)d=new Easy.xtype[a.xtype](Easy.applyIf(a,{renderTo:c}));else d.wrap=e.create(a,c);d.ownerCt=b;b.itemsCmp.push(d)});else if(Easy.isObject(a)||Easy.isElement(a)){var d={};Easy.applyIf(a,b.defaults);if(a.isEasyCmp){d=a;d.render(c)}else if(a.xtype)d=new Easy.xtype[a.xtype](Easy.applyIf(a,{renderTo:c}));else d.wrap=e.create(a,c);d.ownerCt=b;b.itemsCmp.push(d)}this.fireEvent("renderitem",b)},initEvent:function(){var a=this},togglePanel:function(c,b){var a=this;Easy.each(a.headers,function(c,d){if(c==b){Easy.DOM.addClass(c,"e-tab-strip-active");Easy.DOM.show(a.bodys[d]);a.callback(d)}else{Easy.DOM.removeClass(c,"e-tab-strip-active");Easy.DOM.hide(a.bodys[d])}})},render:function(b){var a=this;Easy.DOM.render(a.wrap,Easy.DOM.get(b));Easy.DOM.setStyle(a.wrap,{width:a.width!="auto"?a.width:a.wrap.offsetWidth||"auto"});a.fireEvent("render",a)},onRender:function(){},callback:function(){}});Easy.xtype.regist("tab",Easy.UI.TabPanel);Easy.define("Easy.tree");Easy.tree.Node=Easy.extend(Easy.UI.Base,{baseCls:"e-tree-node",isRender:false,expaned:false,draggable:true,deep:0,checked:undefined,checkBox:null,constructor:function(a,b){Easy.apply(this,a);this.tree=b;this.id=a.id||Easy.UI.Manage.id++;Easy.tree.Node.superclass.constructor.call(this)},initComponent:function(){var a=this;a.arrowCls="e-arrow"+(a.isWin7?"-plus":"");a.wrap=a.createNode(a,true)},initEvent:function(){var a=this;Easy.DOM.on(a.arrow,"mouseover",a.toggleClass,a.arrow,[a.arrowCls+"-over"],false);Easy.DOM.on(a.arrow,"mouseout",a.toggleClass,a.arrow,[a.arrowCls+"-over"],false);Easy.DOM.on(a.arrow,"click",a.toggleNode,a);Easy.DOM.on(a.nodeWrap,"dblclick",a.toggleNode,a);Easy.DOM.on(a.nodeWrap,"mouseover",a.toggleClass,a.nodeWrap,[a.baseCls+"-over"],false);Easy.DOM.on(a.nodeWrap,"mouseout",a.toggleClass,a.nodeWrap,[a.baseCls+"-over"],false);Easy.DOM.on(a.nodeWrap,"click",a.click,a)},createNode:function(b,m){var a=this,l=a.arrowCls,c=a.id,e=a.isLeaf=!b.children||b.children&&b.children.length==0;if(!b.iconCls)delete b.iconCls;Easy.applyIf(b,{iconCls:e?"e-tree-node-leaf":"e-tree-node-parent"});var f=a.create({tag:"img",width:16,height:16,src:Easy.BLANK_IMAGE_URL,cls:"e-icon "+l,nid:c}),g=a.create(Easy.apply({tag:"img",width:16,height:16,src:Easy.BLANK_IMAGE_URL,nid:c},function(){var a={cls:"e-icon"};if(b.iconColor&&Easy.isColor(b.iconColor))a.style={background:b.iconColor};else if(b.icon)a.src=b.icon;else a.cls+=" "+b.iconCls;return a})),i=a.txtwrap=a.create({tag:"span",cls:"e-tree-node-text",html:b.text,nid:c});a.setText=function(b){i.innerHTML=b;a.fireEvent("change",a,b)};f.nid=g.nid=a.txtwrap.nid=c;var d=[],j;if(b.deep>0)for(var k=0;k<b.deep;k++)d.push(Easy.DOM.create({tag:"span",cls:"e-tree-space",html:"&#160;"}));if(!e)d.push(f);else d.push(Easy.DOM.create({tag:"span",cls:"e-tree-space",html:"&#160;"}));if(b.checked!==undefined)j=a.checkBox=a.create({tag:"input",type:"checkbox",cls:"e-tree-node-check"+(e?" e-tree-node-leaf":" e-tree-node-folder"),nid:c,name:"etreeNodeCheck",value:c});d.push(g);d.push(j);d.push(i);a.nodeWrap=a.create({tag:"a",href:"javascript:",cls:"e-tree-node-text-wrap",nid:c,deep:a.deep,children:d});var h=a.create({tag:"div",cls:"e-tree-node",id:c,pid:b.pid,deep:a.deep,children:a.nodeWrap},b.pel);if(m)a.arrow=f;a.tree.nodes.push(a);b.children&&b.children.length>0&&a.initChildren(h,b.expandAll==true?true:b.expaned);a.tree.fireEvent("nodecreated",a.tree,a);return h},initChildren:function(b,e){var a=this,d=[];b.deep=parseInt(Easy.DOM.getAttribute(b,"deep")||"0");var c=a.childWrap=a.create({tag:"div",cls:"e-node-wrap",id:a.id+"_childwrap"},b);Easy.each(a.children,function(e){a.deep+=1;Easy.applyIf(e,{pid:b.id,deep:b.deep+1,pel:c,tree:a.tree});a.expandAll&&Easy.applyIf(e,{expaned:true});d.push(new Easy.tree.Node(e,a.tree))});a.childNodes=d;if(!e){Easy.DOM.hide(c);a.expaned=false}},onRender:function(){var a=this;!a.childWrap&&a.initChildren()},toggleNode:function(b,c){var a=this;a.toggleClass.call(b,a.arrowCls+"-expand");if(a.expaned){a.fireEvent("cllosed",a,b);a.tree.fireEvent("cllosed",a.tree,a,b)}else{a.fireEvent("expand",a,b);a.tree.fireEvent("expand",a.tree,a,b)}c.stop();a.expaned=!a.expaned},click:function(){var a=this;if(a.tree.selectModel=="folder"&&a.isLeaf)return;if(a.tree.selectModel=="leaf"&&!a.isLeaf)return;a.toggleClass.call(a.nodeWrap,a.baseCls+"-active");if(a.checkBox)a.checkBox.checked=a.checked=!a.checked;a.tree.fireEvent("click",a.tree,a)},deselect:function(){var a=this;a.removeClass.call(a.nodeWrap,a.nodeWrap,a.baseCls+"-active");if(a.checkBox)a.checkBox.checked=a.checked=false;a.tree.fireEvent("deselect",a.tree,a)},onExpand:function(a){var b=this;Easy.DOM.show(Easy.get(a.nid+"_childwrap"))},onCllosed:function(a){var b=this;Easy.DOM.hide(Easy.get(a.nid+"_childwrap"))},getLines:function(a){var b=this;Easy.DOM.setStyle(b.childWrap,{"padding-left":(a||0)*20})}});Easy.tree.Panel=Easy.extend(Easy.UI.Base,{baseCls:"e-tree",isRender:false,selectModel:"all",singleSelect:true,selectedNodes:[],tools:{},nodes:[],draggable:true,constructor:function(a){Easy.apply(this,a);Easy.tree.Panel.superclass.constructor.call(this)},initComponent:function(){var a=this;a.wrap=a.create({tag:"div"});if(a.root)a.initRoot();else Easy.Ajax.post(Easy.apply(a.loader,{success:function(b){var c=Easy.decode(b);a.root=c;a.initRoot()}}));a.render(a.renderTo?Easy.get(a.renderTo):null)},initEvent:function(){},initRoot:function(){var a=this;a.fireEvent("load",a);!Easy.isArray(a.root)&&a.expandAll&&Easy.apply(a.root,{expandAll:true,tree:a});if(a.root)if(Easy.isArray(a.root))Easy.each(a.root,function(b){a.expandAll&&Easy.apply(b,{expandAll:true,tree:a});var c=new Easy.tree.Node(b,a);Easy.DOM.render(c.wrap,a.wrap)});else{a.root=new Easy.tree.Node(a.root,a);Easy.DOM.render(a.root.wrap,a.wrap)}else{a.root=new Easy.tree.Node({text:"\u6ca1\u6709\u6570\u636e",id:"none",expandAll:true,tree:a},a);Easy.DOM.render(a.root.wrap,a.wrap)}a.fireEvent("noderender",a)},render:function(b){var a=this;if(!a.isRender){Easy.DOM.render(a.wrap,Easy.get(b));a.isRender=true}a.fireEvent("render",a)},onClick:function(b){var a=this;if(a.singleSelect){Easy.each(a.selectedNodes,function(a){a.deselect(a)});a.selectedNodes=[]}a.selectedNodes.push(b)},hide:function(){Easy.DOM.setStyle(this.wrap,{display:"none"})},show:function(){var a=this;if(a.isRender)Easy.DOM.setStyle(a.wrap,{display:"block"});else a.render.call(a)}});Easy.UI.MSWord=Easy.extend(Easy.UI.Base,{url:"",width:800,height:500,baseCls:"e-msword",showMenubar:1,showTitlebar:0,constructor:function(b){var a=this,d=a.id||"__object_dso";Easy.apply(a,b);if(parseFloat((/windows nt ([\d.]+)/i.exec(navigator.userAgent)||["0","1"])[1])>6){alert("\u672c\u529f\u80fd\u4e0d\u652f\u6301Window 7 \u6216\u8005Windows Vista\u64cd\u4f5c\u7cfb\u7edf");return true}var c='<object classid="clsid:00460182-9E5E-11D5-B7C8-B8269041DD57" id="{id}" width="100%" height="100%"><param name="BorderStyle" value="0"><param name="TitlebarColor" value="52479"><param name="TitlebarTextColor" value="0"><param name="Menubar" value="{menubar}"><param name="Caption" value="demo"><param name="Titlebar" value="{titlebar}"><param name="EnableFileCommand(1)" value="0"><param name="SetTrackRevisions(1)" value="1"></object>';a.wrap=Easy.DOM.create({tag:"div",cls:a.baseCls,style:{width:a.width,height:a.height},html:c.replace("{id}",d).replace("{menubar}",a.showMenubar||0).replace("{titlebar}",a.showTitlebar||0)});Easy.DOM.render(a.wrap,Easy.get(a.renderTo));a.dso=a.wrap.firstChild;a.url&&a.open(a.url,a.url.toLowerCase().indexOf("http://")>-1);Easy.UI.Toolbar.superclass.constructor.call(this)},initComponent:function(){var a=this},initEvent:function(){var a=this},open:function(c,d){var a=this,b=a.url.toLowerCase().indexOf("http://")>-1;if(b)a.dso.Open(c,b);else a.dso.Open(c,false,d||"Word.Document")},save:function(c,b){var a=this;a.dso.HttpInit();Easy.each(b,function(c,b){a.dso.HttpAddPostString(b,c)});a.dso.HttpAddPostCurrFile("FileData",a.dso.DocumentName);a.dso.HttpPost(c)}});Easy.define("Easy.Plug");Easy.Plug.UploadFile=function(b){var a=this;Easy.apply(a,b);var f=Easy.get(b.activeEl),d=Easy.get(b.viewEl),g=Easy.isIE7||Easy.isIE8?"filter":Easy.isGecko?"domfile":Easy.isOpera||Easy.isChrome||Easy.isSafari?"remote":"simple",c=Easy.DOM.create({tag:"input",name:b.fileName,type:"file"}),h=Easy.DOM.create({tag:"form",children:c},Easy.getBody());Easy.DOM.on(c,"change",function(){a.getPath()});var e=Easy.DOM.getPosition(f);Easy.DOM.setStyle(c,{position:"absolute",width:70,left:e.x,top:e.y});Easy.DOM.setOpacity(c,0);a.getPath=function(){switch(g){case"filter":return a.getIEPath();case"domfile":return a.getFFPath();case"remote":case"simple":default:return a.getSimple()}};a.getIEPath=function(){c.select();var a="";try{a=document.selection.createRange().text}finally{document.selection.empty()}a=a.replace(/[)'"%]/g,function(a){return escape(escape(a))});try{d.src=a;d.filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src=a;d.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod='scale',src=\""+a+'")'}catch(b){return}};a.getFFPath=function(){d.src=c.files[0].getAsDataURL()};a.getSimple=function(){d.src=c.value};a.upload=function(){Easy.Ajax.upload({url:b.url,params:b.params,form:form,callback:function(a){b.callback&&Easy.isFunction(b.callback)&&b.callback.call(a)}})};return a};Easy.UI.VMLManager=new function(){var a=this,c=0;a.vmls={};a.length=0;var b={add:function(b){if(b&&b.id){a.vmls[b.id]=b;a.length+=1}},remove:function(b){if(b&&b.id)if(a.vmls[b.id]){Easy.Object.remove(a.vmls,a.vmls[b.id]);a.length-=1}}};Easy.apply(a,b);return a};Easy.UI.VMLID=0;Easy.UI.VML=Easy.extend(Easy.UI.Base,{html:"",text:"",lines:[],hasRelation:[],constructor:function(b){var a=this;Easy.apply(a,b);a.initEvn();a.wrap=Easy.DOM.create({tag:Easy.String.has(b.tagName,":")?b.tagName:"<v:"+b.tagName+' class="vml">'});a.lines=a.hasRelation=[];var c=Easy.apply(a.attributes||{},{id:b.id||"vml_"+Easy.UI.VMLID++});Easy.DOM.setAttributes(a.wrap,c);a.from&&a.setFromAnd2.call(a);var d=a.dd=new Easy.UI.DD(a.wrap);d.onDraging=function(){Easy.each(a.lines,function(b){a.setFromAnd2.call(Easy.UI.Manage[b])})};Easy.UI.VMLManager.add(a);a.setHtml(a.text);Easy.UI.VML.superclass.constructor.call(a);a.node=a.wrap},initEvn:function(){if(Easy.isObject(document.namespaces.v))return;document.createStyleSheet().addRule(".vml","behavior:url(#default#VML);display:inline-block;position:absolute;text-align:center;padding-top:8px;cursor:pointer");!document.namespaces.vml&&!+"\131"&&document.namespaces.add("v","urn:schemas-microsoft-com:vml")},setHtml:function(a){this.wrap.innerHTML=this.html.replace("{txt}",a);return this},setFromAnd2:function(){var a=this,g=a.from,f=a.to;if(f){var l=Easy.UI.Manage[f.id].lines;if(Easy.Array.indexOf(l,a.id)==-1){l.push(a.id);Easy.UI.Manage[g.id].lines.push(a.id)}var d=g.style.pixelLeft,e=f.style.pixelLeft,k=g.style.pixelWidth,h=f.style.pixelWidth,b=g.style.pixelTop,c=f.style.pixelTop,i=g.style.pixelHeight,j=f.style.pixelHeight;if(g==null||f==null)return;if(d>e)if(d-e<=h){x0=d+k/2;x1=e+h/2;if(b>c){y0=b;y1=c+j}else{y0=b+i;y1=c}}else{x0=d;x1=e+h;y0=b+i/2;y1=c+j/2}else if(e-d<=h){x0=d+k/2;x1=e+h/2;if(b>c){y0=b;y1=c+j}else{y0=b+i;y1=c}}else{x0=d+k;x1=e;y0=b+i/2;y1=c+j/2}a.wrap.from=String(x0)+","+String(y0);a.wrap.to=String(x1)+","+String(y1);a.wrap.style.pixelLeft=x0+"px";a.wrap.style.pixelTop=y0+"px"}},render:function(a){Easy.DOM.render(this.wrap,a)}});Easy.plugs=Easy.plugs||{};Easy.plugs.FileManager=Easy.extend(Easy.UI.Panel,{allowFiles:"*",basePath:"/Upload",currentPath:"",getFilePaht:"/upload.aspx",enableViewImg:true,layer:true,title:"\u6587\u4ef6\u7ba1\u7406",width:660,height:450,initComponent:function(){var a=this;Easy.plugs.FileManager.superclass.initComponent.call(a);a.toolbar=new Easy.UI.Toolbar({buttonsAlign:"right",cls:"e-filemanager-toolbar",items:[{xtype:"button",text:" ",iconCls:"e-filemanger-back",handler:function(){a.goBack()}},"-",{xtype:"button",text:" ",iconCls:"e-filemanger-upload",handler:function(){a.uploadDailog()}},{xtype:"button",text:" ",iconCls:"e-filemanger-remove",handler:function(){Easy.Message.confirm("\u4f60\u786e\u5b9a\u8981\u5220\u9664\u9009\u4e2d\u7684\u6587\u4ef6\u6216\u6587\u4ef6\u5939\u5417\uff1f","",function(){a.removeFile()})}},{xtype:"button",text:" ",iconCls:"e-filemanger-refresh",handler:function(){a.loadFile()}}]});a.postionWrap=a.create({tag:"span",html:a.currentPath});var b=Easy.DOM.create({tag:"div",children:[{tag:"span",html:"\u5f53\u524d\u4f4d\u7f6e:"},a.postionWrap],cls:"e-filemanager-position"});Easy.DOM.render(a.toolbar.wrap,a.body);Easy.DOM.insertBefore(b,a.toolbar.body);a.fileBody=a.create({tag:"div",cls:"e-filemanager-body",style:{height:Easy.DOM.getInnerHeight(a.body)-43}},a.body);a.loadFile()},loadFile:function(){var a=this;Easy.Ajax.post({url:a.getFilePaht,params:{action:"getFile",basePath:a.currentPath=a.currentPath||a.basePath},success:function(c){var b=Easy.decode(c);if(!b.exception){a.postionWrap.innerHTML=a.currentPath;a.fileBody.innerHTML="";Easy.each(b,function(b){a.addFile(b.fileName,b.isFolder)})}}})},addFile:function(b,c){var a=this,d=a.create({tag:"div",value:b,cls:"e-filemanager-file-wrap",children:[{tag:"input",type:"checkbox",isFolder:c,value:b},{tag:"img",src:c?"/easy/resources/image/filemanager/folder.png":a.isImage(b)},{tag:"div",html:b.substring(b.lastIndexOf("/")+1)}]},a.fileBody);if(c)Easy.DOM.on(d,"dblclick",function(c){var b=Easy.DOM.getAttribute(c,"value");if(b)a.currentPath+="/"+b;a.loadFile()});else Easy.DOM.on(d,"dblclick",function(c){var b=Easy.DOM.getAttribute(c,"value");if(b){a.value=a.currentPath+"/"+b;a.fireEvent("select",a,a.value)}})},addFolder:function(a){this.addFile(a,true)},removeFile:function(){var a=this,c=a.wrap.getElementsByTagName("input"),b=[];if(c){Easy.each(c,function(a){a.type=="checkbox"&&a.checked&&b.push(a.value+";"+Easy.DOM.getAttribute(a,"isFolder"))});b.length>0&&Easy.Ajax.post({url:a.getFilePaht,params:{action:"removeFile",basePath:a.currentPath=a.currentPath||a.basePath,files:Easy.encode(b)},success:function(c){var b=Easy.decode(c);!b.exception&&a.loadFile()}})}},uploadDailog:function(){var a=this,b=new Easy.UI.Panel({layer:true,width:330,height:150,title:"\u4e0a\u4f20\u6587\u4ef6",items:[{xtype:"form",style:"padding-top:20px;",items:[{xtype:"filefield",name:"file",label:"\u9009\u62e9\u6587\u4ef6",labelWidth:60,listeners:{change:function(b){a.filter(this,b)}}}]},{xtype:"toolbar",height:45,style:"margin-top:10px;",buttonsAlign:"center",items:[{text:"\u4e0a\u4f20",handler:function(){b.itemsCmp[0].upload({url:a.getFilePaht,params:{action:"uploadFile",basePath:a.currentPath=a.currentPath||a.basePath},success:function(d){var c=Easy.decode(d);!c.exception&&Easy.Message.alert("\u6587\u4ef6\u4e0a\u4f20\u6210\u529f\uff01","",function(){b.hide();a.loadFile()})}})}},{text:"\u53d6\u6d88",style:"margin-left:5px;",handler:function(){b.hide()}}]}]});b.show()},goBack:function(){var b=this,a=b.currentPath.split("/");a.length=a.length-1;b.currentPath=a.join("/");b.loadFile()},filter:function(d,a){var b=this;if(!a)return;var c=a.substring(a.lastIndexOf(".")).toLowerCase();if(b.allowFiles!="*"&&!Easy.Array.has(b.allowFiles,c)){Easy.Message.alert("\u53ea\u5141\u8bb8\u4e0a\u4f20\u540e\u7f00\u662f"+b.allowFiles.join(",")+"\u7684\u6587\u4ef6");d.reset();return}},isImage:function(a){var e=this,c=a.substring(a.lastIndexOf(".")).toLowerCase(),f=[".jpg",".gif",".png",".bmp"];if(Easy.Array.has(f,c))return e.enableViewImg?e.currentPath+"/"+a:"/easy/resources/image/filemanager/img.png";else{var d={".js":"js.png",".css":"css.png",".html":"html.png",".mp4":"mp4.png",".doc":"doc.png",".docx":"doc.png",".xls":"xls.png",".xlsx":"xls.png",".txt":"text.png",".avi":"movie.png",".swf":"swf.png","":"unknow.png"},b=d[c];if(!b)b=d[""];return"/easy/resources/image/filemanager/"+b}}});Easy.plugs=Easy.plugs||{};Easy.plugs.MSOffice=Easy.extend(Easy.UI.Base,{url:"",width:800,height:500,baseCls:"e-msword",showMenubar:1,showTitlebar:0,trackRevisions:true,officeType:{"1":"Word.Document","2":"Excel.Sheet"},markCmd:{"0":"","1":"::ADDMARK::","2":"::DELMARK::","3":"::GETMARK::","4":"::FILE::","5":"::JPG::"},menuFlag:{MNU_NEW:"1",MNU_OPEN:"2",MNU_CLOSE:"4",MNU_SAVE:"8",MNU_SAVEAS:"16",MNU_PGSETUP:"64",MNU_PRINT:"256",MNU_PROPS:"32",MNU_PRINTPV:"126"},constructor:function(b){var a=this,d=a.id||"__object_dso";Easy.apply(a,b);if(!Easy.isIE){Easy.Message.alert("Word\u5728\u7ebf\u7f16\u8f91\u63a7\u4ef6\u53ea\u80fd\u5728IE\u6d4f\u89c8\u5668\u4e0b\u8fd0\u884c\uff0c\u5176\u4ed6\u6d4f\u89c8\u5668\u73b0\u5728\u8fd8\u4e0d\u652f\u6301\uff0c\u8bf7\u6362\u7528IE\u6d4f\u89c8\u5668\u6d4f\u89c8\u8be5\u7cfb\u7edf!");return true}var c='<object classid="clsid:00460182-9E5E-11D5-B7C8-B8269041DD57" id="{id}" width="100%" height="100%"><param name="BorderStyle" value="1"><param name="BorderColor" value="f3f3f3"><param name="TitlebarColor" value="52479"><param name="TitlebarTextColor" value="0"><param name="Menubar" value="{menubar}"><param name="Caption" value="demo"><param name="Titlebar" value="{titlebar}"><param name="EnableFileCommand(1)" value="0"><param name="SetTrackRevisions(1)" value="1"></object>';a.wrap=Easy.DOM.create({tag:"div",cls:a.baseCls,style:{width:a.width,height:a.height},html:c.replace("{id}",d).replace("{menubar}",a.showMenubar||0).replace("{titlebar}",a.showTitlebar||0)});Easy.DOM.render(a.wrap,Easy.get(a.renderTo));a.dso=a.wrap.firstChild;a.url&&a.open(a.url,a.url.toLowerCase().indexOf("http://")>-1);a.dso.SetTrackRevisions(a.trackRevisions-0);Easy.plugs.MSOffice.superclass.constructor.call(this)},initComponent:function(){var a=this},initEvent:function(){var a=this},create:function(b){var a=this;a.dso.CreateNew(a.officeType[b])},open:function(b,a){var c=this,d=b.toLowerCase().indexOf("http://")>-1;if(!a){var e=b.substring(b.lastIndexOf("."));if(e)if(e.toLowerCase().indexOf("doc")>-1)a="Word.Document";else a="Excel.Sheet"}else a=c.officeType[a];if(d)c.dso.Open(b,d,a);else c.dso.Open(b,false,a);setTimeout(function(){c.dso.SetTrackRevisions(c.trackRevisions-0)},10)},accpetRevisions:function(){var a=this;a.dso.SetTrackRevisions(4)},setUser:function(a){var b=this;b.dso.SetCurrUserName(a)},setDate:function(a){var b=this;b.dso.SetCurrTime(a)},setMark:function(b,c,d){var a=this;a.dso.SetFieldValue(b,c,a.markCmd[d])},setMenu:function(a){var b=this;b.dso.SetMenuDisplay(a)},setProtect:function(a,b){var c=this;c.dso.ProtectDoc(a-0,1,b)},showRevisions:function(a){var b=this;b.dso.ShowRevisions(a)},merge:function(a,b){var c=this;c.dso.InSertFile(a,b)},removeLocal:function(a){var b=this;b.dso.DeleteLocalFile(a)},createTemp:function(){var a=this;return a.dso.GetTempFilePath()},setViewMode:function(a){var b=this;b.dso.ShowView(a)},save:function(d,b,c){var a=this;if(c){a.dso.HttpInit();Easy.each(b,function(c,b){a.dso.HttpAddPostString(b,c)});a.dso.HttpAddPostCurrFile("FileData",a.dso.DocumentName);a.dso.HttpPost(d)}else a.dso.Save(b,true)},download:function(b,a){var c=this;c.dso.DownloadFile(b,a)},getRevCount:function(){return this.dso.GetRevCount()},getRevInfo:function(b,a){return this.dso.GetRevInfo(b,a)}})